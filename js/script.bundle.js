!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=16)}([,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),i=n.GRID_DRCT.DRCT_F,a=n.GRID_DRCT.DRCT_B,o=n.GRID_DRCT.DRCT_R,s=n.GRID_DRCT.DRCT_L,c=n.GRID_DRCT.DRCT_FR,l=n.GRID_DRCT.DRCT_FL,u=n.GRID_DRCT.DRCT_BR,d=n.GRID_DRCT.DRCT_BL,f=n.GRID_DRCT.DRCT_2F,h=n.GRID_DRCT.DRCT_2B,R=n.GRID_DRCT.DRCT_2R,g=n.GRID_DRCT.DRCT_2L,p=n.GRID_DRCT.DRCT_2FR,v=n.GRID_DRCT.DRCT_2FL,y=n.GRID_DRCT.DRCT_2BR,_=n.GRID_DRCT.DRCT_2BL,G=n.GRID_DRCT.DRCT_FFR,m=n.GRID_DRCT.DRCT_FFL,b=n.GRID_DRCT.DRCT_BBR,T=n.GRID_DRCT.DRCT_BBL,C=n.GRID_DRCT.DRCT_FRR,D=n.GRID_DRCT.DRCT_FLL,w=n.GRID_DRCT.DRCT_BRR,B=n.GRID_DRCT.DRCT_BLL,E=[i,a,o,s,c,l,u,d],L=[[f,i],[h,a],[R,o],[g,s],[p,c],[v,l],[y,u],[_,d]],M=[[G,f,i],[G,c,i],[G,c,o],[m,f,i],[m,l,i],[m,l,s],[b,h,a],[b,u,a],[b,u,o],[T,h,a],[T,d,a],[T,d,s],[C,c,i],[C,R,o],[C,c,o],[D,l,i],[D,g,s],[D,l,s],[w,u,a],[w,R,o],[w,u,o],[B,d,a],[B,g,s],[B,d,s]];t.BY_NORMAL_RELATI=0,t.BY_COMMON_RELATI=1,t.RelatiRoute={allow:function(e,r,n,i){switch(i){case t.BY_COMMON_RELATI:for(var a=0;a<24;a++){var o=e.getGrid(M[a][0]),s=e.getGrid(M[a][1]),c=e.getGrid(M[a][2]);if(o&&o.symbol==r&&o.is(n,"any")&&s.isSpace&&c.isSpace)return!0}for(a=0;a<8;a++){o=e.getGrid(L[a][0]);var l=e.getGrid(L[a][1]);if(o&&o.symbol==r&&o.is(n,"any")&&l.isSpace)return!0}case t.BY_NORMAL_RELATI:for(a=0;a<8;a++){if((o=e.getGrid(E[a]))&&o.symbol==r&&o.is(n,"any"))return!0}}return!1},trace:function(e,r,n,i){var a=[];switch(i){case t.BY_COMMON_RELATI:for(var o=0;o<24;o++){var s=e.getGrid(M[o][0]),c=e.getGrid(M[o][1]),l=e.getGrid(M[o][2]);s&&s.symbol==r&&s.is(n,"any")&&c.isSpace&&l.isSpace&&a.push([s,c,l])}for(o=0;o<8;o++){s=e.getGrid(L[o][0]);var u=e.getGrid(L[o][1]);s&&s.symbol==r&&s.is(n,"any")&&u.isSpace&&a.push([s,u])}case t.BY_NORMAL_RELATI:for(o=0;o<8;o++){(s=e.getGrid(E[o]))&&s.symbol==r&&s.is(n,"any")&&a.push([s])}}return a}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function t(){var e;(e=document.getElementsByClassName("page active")[0])&&e.classList.remove("active"),(e=document.querySelector(location.hash+"-page"))&&e.classList.add("active")}e.switchTo=function(e){location.hash=e},window.addEventListener("hashchange",t),t()}(t.Page||(t.Page={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=["relati-repeater"];t.PlacementRule={allow:function(e,t,r){return!e.symbol&&n.RelatiRoute.allow(e,t,i,r)},trace:function(e,r,n){for(var i=[],a=0,o=e.board.grids;a<o.length;a++){var s=o[a];!s.symbol&&t.PlacementRule.allow(s,r,n||e.routeType)&&i.push(s)}return i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="http://www.w3.org/2000/svg";function i(e,t){for(var r in t)e.setAttribute(r,t[r])}t.createSVG=function(e,t){var r=document.createElementNS(n,e);return t&&i(r,t),r},t.updateSVG=i,t.appendSVGChild=function(e,t){for(var r=0,n=t;r<n.length;r++){var i=n[r];e.appendChild(i)}},t.removeSVGChild=function(e){for(var t=e.childNodes.length;t-- >0;)e.removeChild(e.childNodes[0])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t;function r(){e.view.className="none",e.isShow=!1}function n(e){t&&t(e),t=null,r()}e.view=document.getElementById("message-box"),e.messageIcon=document.getElementById("message-icon"),e.messageContent=document.getElementById("message-content"),e.acceptButton=document.getElementById("message-accept"),e.rejectButton=document.getElementById("message-reject"),e.verifyButton=document.getElementById("message-verify"),e.isShow=!1,e.show=function(r,n,i){e.view.className=r,e.messageContent.innerText=n,e.messageContent.style.display=n?"":"none",t=i,e.isShow=!0},e.hide=r,e.response=n,e.acceptButton.addEventListener("click",function(e){return n("accept")}),e.rejectButton.addEventListener("click",function(e){return n("reject")}),e.verifyButton.addEventListener("click",function(e){return n("verify")})}(t.MessageBox||(t.MessageBox={}))},,function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(19),o=r(20),s=function(){function e(e,t,r,n,i){this.board=e,this.players=t,this.routeType=r,this.gridActions=n,this.gridEffects=i,this.turn=0}return e.prototype.start=function(){return n(this,void 0,void 0,function(){var e,t,r,n,a,s,c,l;return i(this,function(i){switch(i.label){case 0:e=o.GAME_RESULT_NONE,this.onstart&&this.onstart(),i.label=1;case 1:return e!=o.GAME_RESULT_NONE?[3,12]:(r=this.selectedGrid)?[3,3]:[4,this.gridSelect()];case 2:r=i.sent(),i.label=3;case 3:if(!(t=r))return[3,1];this.onturnstart&&this.onturnstart(t),n=!1,a=0,s=this.gridActions,i.label=4;case 4:return a<s.length?[4,s[a].do(t,this)]:[3,7];case 5:if(i.sent())return n=!0,[3,7];i.label=6;case 6:return a++,[3,4];case 7:if(!n)return[3,1];this.selectedGrid=t,c=0,l=this.gridEffects,i.label=8;case 8:return c<l.length?[4,l[c].do(this)]:[3,11];case 9:i.sent(),i.label=10;case 10:return c++,[3,8];case 11:return this.turn++,delete this.selectedGrid,e=o.WinnerDecision.state(this),this.onturnend&&this.onturnend(t),[3,1];case 12:return this.onend&&this.onend(e),[2,e]}})})},e.prototype.restart=function(){this.turn=0;for(var e=0,t=this.board.grids;e<t.length;e++){var r=t[e];r.symbol="",r.lost(a.AllRelatiStatus)}this.start()},e.prototype.gridSelect=function(){var e=this;return new Promise(function(t){e.selectGrid=function(r){t(r),e.ongridselect&&e.ongridselect(r)}})},Object.defineProperty(e.prototype,"nowPlayer",{get:function(){return this.players[this.turn%2]},enumerable:!0,configurable:!0}),e}();t.RelatiGame=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.DRCT_C=0]="DRCT_C",e[e.DRCT_F=4096]="DRCT_F",e[e.DRCT_B=256]="DRCT_B",e[e.DRCT_R=16]="DRCT_R",e[e.DRCT_L=1]="DRCT_L",e[e.DRCT_FR=4112]="DRCT_FR",e[e.DRCT_FL=4097]="DRCT_FL",e[e.DRCT_BR=272]="DRCT_BR",e[e.DRCT_BL=257]="DRCT_BL",e[e.DRCT_2F=8192]="DRCT_2F",e[e.DRCT_2B=512]="DRCT_2B",e[e.DRCT_2R=32]="DRCT_2R",e[e.DRCT_2L=2]="DRCT_2L",e[e.DRCT_2FR=8224]="DRCT_2FR",e[e.DRCT_2FL=8194]="DRCT_2FL",e[e.DRCT_2BR=544]="DRCT_2BR",e[e.DRCT_2BL=514]="DRCT_2BL",e[e.DRCT_FFR=8208]="DRCT_FFR",e[e.DRCT_FFL=8193]="DRCT_FFL",e[e.DRCT_BBR=528]="DRCT_BBR",e[e.DRCT_BBL=513]="DRCT_BBL",e[e.DRCT_FRR=4128]="DRCT_FRR",e[e.DRCT_FLL=4098]="DRCT_FLL",e[e.DRCT_BRR=288]="DRCT_BRR",e[e.DRCT_BLL=258]="DRCT_BLL"}(t.GRID_DRCT||(t.GRID_DRCT={}));var n=function(){function e(e,t,r){this.board=e,this.x=t,this.y=r,this.i=t*e.height+r}return e.prototype.getGrid=function(e){var t=(61440&e)>>12,r=(3840&e)>>8,n=(240&e)>>4,i=15&e,a=this.x+n-i,o=this.y+r-t;return this.board.getGrid(a,o)},e}();t.Grid=n;var i=function(){function e(e,t){this.width=e,this.height=t;var r=[];this.grids=r,this.length=e*t;for(var i=0;i<e;i++)for(var a=0;a<t;a++){var o=new n(this,i,a);r[o.i]=o}}return e.prototype.getGrid=function(e,t){if(e<0||e>=this.width||t<0||t>=this.height)return null;var r=e*this.height+t;return this.grids[r]},e}();t.GridBoard=i},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(9),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.symbol="",t.status={},t}return i(t,e),t.prototype.is=function(e,t){if("string"==typeof e)return this.status[e];var r=e;if("all"===t){for(var n=0,i=r;n<i.length;n++){var a=i[n];if(!this.status[a])return!1}return!0}for(var o=0,s=r;o<s.length;o++){var c=s[o];if(this.status[c])return!0}return!1},t.prototype.gain=function(e){if("string"==typeof e)return this.status[e]=!0;for(var t=0,r=e;t<r.length;t++){var n=r[t];this.status[n]=!0}},t.prototype.lost=function(e){if("string"==typeof e)return this.status[e]=!1;for(var t=0,r=e;t<r.length;t++){var n=r[t];this.status[n]=!1}},Object.defineProperty(t.prototype,"isSpace",{get:function(){return""===this.symbol},enumerable:!0,configurable:!0}),t}(a.Grid);t.RelatiGrid=o;var s=function(e){function t(t,r){for(var n=e.call(this,t,r)||this,i=0;i<t;i++)for(var a=0;a<r;a++){var s=new o(n,i,a);n.grids[s.i]=s}return n}return i(t,e),t}(a.GridBoard);t.RelatiBoard=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e){this.symbol=e}}();t.RelatiPlayer=n},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),a=function(){function e(e,t){this.game=e,this.container=t,this.context=i.createSVG("svg"),this.gridViews=[];var r=e.board;i.updateSVG(this.context,{width:""+5*r.width,height:""+5*r.height});var n=i.createSVG("g"),a=i.createSVG("g"),c=i.createSVG("g"),l=i.createSVG("g");!function(e,t){for(var r=1;r<e.width;r++){o.d="M "+5*r+" 0 V "+5*e.height;var n=i.createSVG("path",o);t.appendChild(n)}for(var a=1;a<e.height;a++){o.d="M 0 "+5*a+" H "+5*e.width;var n=i.createSVG("path",o);t.appendChild(n)}}(r,c),this.layers=[n,a,c,l],i.appendSVGChild(this.context,this.layers);for(var u=0,d=r.grids;u<d.length;u++){var f=d[u],h=new s(f);l.appendChild(h.context),this.gridViews.push(h)}this.container.appendChild(this.context),this.resize(),window.addEventListener("resize",this.resize.bind(this))}return e.prototype.resize=function(){var e=this.container,t=this.game.board,r=t.width,n=t.height;this.context.style.transform="scale("+.95*Math.min(e.clientWidth/(5*r),e.clientHeight/(5*n))+")"},e.prototype.update=function(){for(var e=0,t=this.gridViews;e<t.length;e++){t[e].update()}},e.prototype.remove=function(){for(var e=0,t=this.gridViews;e<t.length;e++){t[e].remove()}i.removeSVGChild(this.layers[0]),i.removeSVGChild(this.layers[1])},e}();t.RelatiBoardView=a;var o={d:"",stroke:"#888","stroke-width":"0.4"};var s=function(){function e(e){this.grid=e,this.context=i.createSVG("g"),this.symbol="",this.status={},this.symbol=e.symbol,this.status=n({},e.status),this.update()}return e.prototype.update=function(){var e=this.grid;if(this.symbol!=e.symbol||this.status["relati-launcher"]!=e.status["relati-launcher"]||this.status["relati-repeater"]!=e.status["relati-repeater"]||this.status["relati-receiver"]!=e.status["relati-receiver"]||this.status["attack-selected"]!=e.status["attack-selected"]){var t={d:"",fill:"none",stroke:"","stroke-width":"0.6"},r=5*e.x+1,a=5*e.y+1,o=5*e.x+4,s=5*e.y+4;switch(e.symbol){case"":i.removeSVGChild(this.context);break;case"O":t.d="M "+(r+1.5)+" "+(a+1.5)+" m 0 -1.5 a 1.5 1.5 0 0 1, 0 3 a 1.5 1.5 0 0 1, 0 -3",t.stroke="crimson";break;case"X":t.d="M "+r+" "+a+" L "+o+" "+s+" M "+o+" "+a+" L "+r+" "+s,t.stroke="royalblue"}if(e.is("relati-repeater")||(t.stroke="#666"),e.is(["relati-launcher","relati-receiver"],"any")||(t.stroke="#bbb"),this.symbol){var c=t.stroke;i.updateSVG(this.context.childNodes[0],{stroke:c})}else e.isSpace||(e.is("relati-launcher")?(t["stroke-width"]="1.2",this.context.appendChild(i.createSVG("path",t)),t["stroke-width"]="0.6",t.stroke="#f2f2f2",this.context.appendChild(i.createSVG("path",t))):e.is("relati-repeater")?this.context.appendChild(i.createSVG("path",t)):(e.is("relati-receiver"),this.context.appendChild(i.createSVG("path",t))));this.symbol=e.symbol,this.status=n({},e.status)}},e.prototype.remove=function(){this.symbol="",this.status={},i.removeSVGChild(this.context)},e}();t.RelatiGridView=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(2),a={"":"#666",O:"crimson",X:"royalblue"},o={cx:"",cy:"",r:"0.5",fill:""};function s(e,t,r){return o.cx=""+(5*e+2.5),o.cy=""+(5*t+2.5),o.fill=r,n.createSVG("circle",o)}t.createHintEffect=function(e,t,r){for(var n=a[t],i=0,o=e;i<o.length;i++){var c=o[i],l=c.x,u=c.y;c.symbol||r.appendChild(s(l,u,n))}};var c={d:"","stroke-width":"0.5",stroke:"",fill:"none",class:"relati-effect-line"};function l(e,t,r,i){c.d="M "+(5*e.x+2.5)+" "+(5*e.y+2.5),c.stroke=r;for(var a=0,o=t;a<o.length;a++){var s=o[a];c.d+=" L "+(5*s.x+2.5)+" "+(5*s.y+2.5)}var l=n.createSVG("path",c);i.appendChild(l)}function u(e,t,r,n,a,o){e.is("effect-activate")||o.turn>a||(e.gain("effect-activate"),setTimeout(function(){if(!(o.turn>a))for(var s=0,c=i.RelatiRoute.trace(e,e.symbol,["relati-receiver"],n);s<c.length;s++){var d=c[s];d.reverse();var f=d[d.length-1];f.is("effect-activate")||(l(e,d,t,r),u(f,t,r,n,a,o))}},250))}t.createRelatiEffect=function(e,t,r){for(var n=r.board.grids,i=r.routeType,o=r.turn,s=a[e],c=0,l=n;c<l.length;c++)(h=l[c]).lost("effect-activate");for(var d=0,f=n;d<f.length;d++){var h;(h=f[d]).is("relati-launcher")&&h.symbol==e&&u(h,s,t,i,o,r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.Placement={do:function(e,t){if(!e.isSpace)return!1;var r=t.nowPlayer.symbol,i=t.routeType;if(t.turn<2)e.symbol=r,e.gain("relati-launcher");else{if(!n.PlacementRule.allow(e,r,i))return!1;e.symbol=r,e.gain("relati-receiver")}return!0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=["relati-receiver"];function a(e,t){if(!e.is("relati-repeater")){e.gain("relati-repeater");for(var r=0,o=n.RelatiRoute.trace(e,e.symbol,i,t);r<o.length;r++){a(o[r][0],t)}}}t.RestoreRepeater={do:function(e){for(var t=e.board,r=e.routeType,n=0,i=t.grids;n<i.length;n++){var o=i[n];o.is("relati-launcher")&&a(o,r)}}},t.DestoryRepeater={do:function(e){for(var t=0,r=e.board.grids;t<r.length;t++){r[t].lost("relati-repeater")}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3),a=r(6);r(17),r(18),r(21),location.hash||i.Page.switchTo("main"),(n=window).Page=i.Page,n.MessageBox=a.MessageBox},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=document.getElementById("main-to-game"),a=document.getElementById("main-to-help");i.addEventListener("click",function(e){return n.Page.switchTo("game")}),a.addEventListener("click",function(e){return n.Page.switchTo("help")})},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this;Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),s=r(8),c=r(10),l=r(11),u=r(2),d=r(12),f=r(13),h=r(4),R=r(6),g=r(14),p=r(15),v=r(5);document.getElementById("game-to-main").addEventListener("click",function(){R.MessageBox.show("yorn accept reject","確認離開？",function(e){"accept"==e&&o.Page.switchTo("main")})});var y=new c.RelatiBoard(9,9),_=[new l.RelatiPlayer("O"),new l.RelatiPlayer("X")],G=[g.Placement],m=[p.DestoryRepeater,p.RestoreRepeater],b=new s.RelatiGame(y,_,u.BY_COMMON_RELATI,G,m),T=document.getElementById("game-board"),C=new d.RelatiBoardView(b,T);window.addEventListener("hashchange",function(){"#game"==location.hash&&b.restart()}),C.context.addEventListener("click",function(e){var t=Math.floor(e.offsetX/5),r=Math.floor(e.offsetY/5),n=y.getGrid(t,r);R.MessageBox.isShow||b.selectGrid&&b.selectGrid(n)}),b.onstart=C.remove.bind(C),b.onend=function(e){var t="",r="";switch(e){case 1:t="owin",r="圈方獲勝！";break;case 2:t="xwin",r="叉方獲勝！";break;case 3:t="draw",r="無人獲勝！"}R.MessageBox.show(t+" accept reject",r,function(e){"accept"==e&&b.restart()})};var D="";b.onturnstart=function(){return D=b.nowPlayer.symbol},b.ongridselect=C.update.bind(C),b.onturnend=function(){return n(a,void 0,void 0,function(){var e,t;return i(this,function(r){return C.update(),e=b.nowPlayer.symbol,t=h.PlacementRule.trace(b,e,u.BY_COMMON_RELATI),v.removeSVGChild(C.layers[0]),v.removeSVGChild(C.layers[1]),f.createHintEffect(t,e,C.layers[1]),f.createRelatiEffect(D,C.layers[0],b),[2]})})},b.start(),window.game=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllRelatiStatus=["relati-launcher","relati-repeater","relati-receiver","effect-activate"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.GAME_RESULT_NONE=0,t.GAME_RESULT_OWIN=1,t.GAME_RESULT_XWIN=2,t.GAME_RESULT_DRAW=3,t.WinnerDecision={state:function(e){if(e.turn<2)return t.GAME_RESULT_NONE;var r=e.nowPlayer,i=n.PlacementRule.trace(e,"O"),a=n.PlacementRule.trace(e,"X"),o=null!=i[0],s=null!=a[0];if(o&&s)return t.GAME_RESULT_NONE;if("O"==r.symbol){if(o)return t.GAME_RESULT_NONE;if(s)return t.GAME_RESULT_XWIN}else if("X"==r.symbol){if(s)return t.GAME_RESULT_NONE;if(o)return t.GAME_RESULT_OWIN}return t.GAME_RESULT_DRAW}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(6),a=r(8),o=r(10),s=r(11),c=r(2),l=r(12),u=r(13),d=r(4),f=r(14),h=r(15),R=r(5),g=document.getElementById("help-to-main"),p=document.getElementById("help-desc");g.addEventListener("click",function(e){i.MessageBox.show("yorn accept reject","確認離開？",function(e){"accept"==e&&n.Page.switchTo("main")})});var v=new o.RelatiBoard(9,9),y=[new s.RelatiPlayer("O"),new s.RelatiPlayer("X")],_=[f.Placement],G=[h.DestoryRepeater,h.RestoreRepeater],m=new a.RelatiGame(v,y,c.BY_COMMON_RELATI,_,G),b=document.getElementById("help-board"),T=new l.RelatiBoardView(m,b);window.addEventListener("hashchange",function(){"#help"==location.hash&&m.restart()}),T.context.addEventListener("click",function(e){var t=Math.floor(e.offsetX/5),r=Math.floor(e.offsetY/5),n=v.getGrid(t,r);i.MessageBox.isShow||"O"!==m.nowPlayer.symbol||w[m.turn]&&w[m.turn].indexOf(n)<0||m.selectGrid&&m.selectGrid(n)}),m.onstart=function(){i.MessageBox.show("verify","放置符號時需發生連線，無法繼續放置符號時便輸了，以下為連線的範例",null),m.selectedGrid=D[m.turn],T.remove()},m.onend=function(e){var t="",r="";switch(e){case 1:t="owin",r="圈方獲勝！";break;case 2:t="xwin",r="叉方獲勝！";break;case 3:t="draw",r="無人獲勝！"}i.MessageBox.show(t+" accept reject",r,function(e){"accept"==e&&m.restart()})};var C="";m.onturnstart=function(){C=m.nowPlayer.symbol,B[m.turn]&&(p.innerHTML=B[m.turn])},m.ongridselect=T.update.bind(T),m.onturnend=function(){T.update();var e=m.nowPlayer.symbol,t=d.PlacementRule.trace(m,e,c.BY_COMMON_RELATI);if(R.removeSVGChild(T.layers[0]),R.removeSVGChild(T.layers[1]),u.createHintEffect(t,m.nowPlayer.symbol,T.layers[1]),w[m.turn]){for(var r=0,a=T.layers[1].childNodes;r<a.length;r++){var o=a[r];R.updateSVG(o,{opacity:"0.4"})}u.createHintEffect(w[m.turn],m.nowPlayer.symbol,T.layers[1])}u.createRelatiEffect(C,T.layers[0],m);var s=m.turn;switch(m.turn<2?m.selectedGrid=D[m.turn]:setTimeout(function(){m.turn===s&&m.selectGrid&&m.selectGrid(D[m.turn])},1e3),m.turn){case 11:i.MessageBox.show("verify","倘若將一處圍成區塊時，對方將無法藉由連線把符號放入其中",null);break;case 51:i.MessageBox.show("verify","恭喜，想必你對遊戲有一些概念了",function(){n.Page.switchTo("main")})}};var D={0:v.getGrid(4,4),1:v.getGrid(5,4),3:v.getGrid(4,5),5:v.getGrid(2,4),7:v.getGrid(5,3),9:v.getGrid(7,1),11:v.getGrid(7,5),13:v.getGrid(8,5),15:v.getGrid(5,5),17:v.getGrid(3,5),19:v.getGrid(2,5),21:v.getGrid(6,4),23:v.getGrid(5,6),25:v.getGrid(5,7),27:v.getGrid(4,7),29:v.getGrid(3,7),31:v.getGrid(2,7),33:v.getGrid(1,7),35:v.getGrid(0,7),37:v.getGrid(1,5),39:v.getGrid(1,6),41:v.getGrid(2,2),43:v.getGrid(3,2),45:v.getGrid(0,3),47:v.getGrid(4,1),49:v.getGrid(0,2)},w={2:[v.getGrid(4,3),v.getGrid(3,3)],4:[v.getGrid(2,1),v.getGrid(3,1)],6:[v.getGrid(6,3)],8:[v.getGrid(5,2)],10:[v.getGrid(6,2)],12:[v.getGrid(5,0),v.getGrid(5,1),v.getGrid(7,3),v.getGrid(8,3)],20:[v.getGrid(6,5)],22:[v.getGrid(7,4)],24:[v.getGrid(6,7)],26:[v.getGrid(5,8)],28:[v.getGrid(4,8)],30:[v.getGrid(3,8)],32:[v.getGrid(2,8)],34:[v.getGrid(1,8)],36:[v.getGrid(1,3)],38:[v.getGrid(0,5)],40:[v.getGrid(1,1)],42:[v.getGrid(2,3)],44:[v.getGrid(1,2)],46:[v.getGrid(2,1),v.getGrid(3,1)],48:[v.getGrid(3,0)],50:[v.getGrid(0,1)]};w[14]=w[12],w[16]=w[12],w[18]=w[12];var B={0:"一般連線範例",3:"遠程連線範例",5:"遠程連線中斷範例",7:"遠程連線恢復技巧",9:"遠程連線中斷技巧",11:"區塊建立技巧",19:"區塊破壞技巧",27:"區塊壓制技巧",41:"區塊抗壓技巧"};"#help"==location.hash&&m.start()}]);
//# sourceMappingURL=script.bundle.js.map