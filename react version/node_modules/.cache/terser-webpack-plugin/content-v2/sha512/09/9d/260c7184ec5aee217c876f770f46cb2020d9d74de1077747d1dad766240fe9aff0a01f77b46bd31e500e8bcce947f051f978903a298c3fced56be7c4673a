{"map":"{\"version\":3,\"sources\":[\"webpack/bootstrap\",\"external \\\"React\\\"\",\"/home/fixiabis/Documents/project/relati.io/relati/Relati/RelatiRole.ts\",\"/home/fixiabis/Documents/project/relati.io/relati/Relati/RelatiRules.ts\",\"/home/fixiabis/Documents/project/relati.io/relati/Relati/RelatiRoles.ts\",\"/home/fixiabis/Documents/project/relati.io/relati/Relati/RelatiRoleEffects.ts\",\"/home/fixiabis/Documents/project/relati.io/src/index.tsx\",\"external \\\"ReactDOM\\\"\",\"/home/fixiabis/Documents/project/relati.io/relati/Relati.ts\",\"/home/fixiabis/Documents/project/relati.io/relati/Relati/RelatiGame.ts\",\"/home/fixiabis/Documents/project/relati.io/relati/Relati/RelatiRules/RelatiBySource.ts\",\"/home/fixiabis/Documents/project/relati.io/relati/Relati/RelatiRules/RelatiToTarget.ts\",\"/home/fixiabis/Documents/project/relati.io/relati/Relati/RelatiRoles/RelatiLeader.ts\",\"/home/fixiabis/Documents/project/relati.io/relati/Relati/RelatiRoleEffects/RelatiMaintain.ts\",\"/home/fixiabis/Documents/project/relati.io/relati/Relati/RelatiPlayer.ts\",\"/home/fixiabis/Documents/project/relati.io/relati/GridBoard.ts\",\"/home/fixiabis/Documents/project/relati.io/src/components/RelatiViews/RelatiBoardView.tsx\",\"/home/fixiabis/Documents/project/relati.io/src/components/RelatiViews/RelatiBadgeView.tsx\"],\"names\":[\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"modules\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"React\",\"RelatiRole\",\"owner\",\"grid\",\"this\",\"type\",\"status\",\"effects\",\"actions\",\"is\",\"_i\",\"status_1\",\"length\",\"statusName\",\"_a\",\"status_2\",\"gain\",\"statusList\",\"arguments\",\"statusList_1\",\"lost\",\"statusList_2\",\"RelatiRoleStatusRelatiRemoteStable\",\"RelatiRoleStatusRelatiRemoteNormal\",\"RelatiRoleStatusRelatiRemote\",\"RelatiRoleStatusRelatiNormal\",\"RelatiRoleStatusRelati\",\"RelatiRoleStatusRelatiLauncher\",\"RelatiRoleStatusRelatiRepeater\",\"RelatiRoleStatusRelatiReceiver\",\"__export\",\"ReactDOM\",\"Relati_1\",\"GridBoard_1\",\"RelatiBoardView_1\",\"board\",\"GridBoard\",\"game\",\"RelatiGame\",\"players\",\"RelatiPlayer\",\"container\",\"document\",\"getElementById\",\"addEventListener\",\"readyState\",\"console\",\"log\",\"clientWidth\",\"render\",\"createElement\",\"RelatiBoardView\",\"gridSize\",\"window\",\"RelatiRules\",\"RelatiRoles\",\"RelatiRoleEffects\",\"RelatiRole_1\",\"turn\",\"getNowPlayer\",\"totalPlayer\",\"selectGrid\",\"role\",\"RelatiLeader\",\"RelatiBySource\",\"allow\",\"gridList\",\"grid_1\",\"_b\",\"_c\",\"do\",\"enemy\",\"_d\",\"_e\",\"badge\",\"_f\",\"_g\",\"RelatiSourceGridStatus\",\"state\",\"RelatiNormalBySource\",\"RelatiRemoteBySource\",\"trace\",\"concat\",\"RelatiNormalSourceGridStatus\",\"sourceGrids\",\"queries\",\"sourceGrid\",\"ruleTraces\",\"push\",\"target\",\"routes\",\"RelatiRemoteSourceGridStatus\",\"RelatiRemoteNormalBySource\",\"RelatiRemoteStableBySource\",\"RelatiRemoteNormalSourceGridStatus\",\"middleGrid\",\"RelatiRemoteStableSourceGridStatus\",\"middleGrids\",\"slice\",\"j\",\"middleGrid1\",\"middleGrid2\",\"RelatiTargetGridStatus\",\"RelatiToTarget\",\"RelatiNormalToTarget\",\"RelatiRemoteToTarget\",\"RelatiNormalTargetGridStatus\",\"targetGrids\",\"targetGrid\",\"RelatiRemoteTargetGridStatus\",\"RelatiRemoteNormalToTarget\",\"RelatiRemoteStableToTarget\",\"RelatiRemoteNormalTargetGridStatus\",\"RelatiRemoteStableTargetGridStatus\",\"_super\",\"_this\",\"apply\",\"RelatiMaintain\",\"__extends\",\"maintain\",\"ruleTraces_1\",\"GridQueryCacheable\",\"_queryCache\",\"_queriesCache\",\"_cacheQueryResult\",\"command\",\"result\",\"_cacheQueriesResult\",\"commmands\",\"results\",\"clearQueryResult\",\"clearQueriesResult\",\"commands\",\"Grid\",\"x\",\"y\",\"coordinate\",\"String\",\"fromCharCode\",\"query\",\"directionCommand\",\"unitCarried\",\"unit\",\"directionCommand_1\",\"direction\",\"unitValue\",\"parseInt\",\"isNaN\",\"grids\",\"directionCommands\",\"simplifyDirectionList\",\"originalDirectionLists\",\"indexOf\",\"split\",\"simplifyDirection\",\"match\",\"originalDirection\",\"replace\",\"width\",\"height\",\"gridRow\",\"coordinateCommand\",\"charCodeAt\",\"substr\",\"coordinateCommands\",\"coordinates\",\"startCoordinate\",\"endCoordinate\",\"startGrid\",\"endGrid\",\"startX\",\"Math\",\"min\",\"endX\",\"max\",\"startY\",\"endY\",\"RelatiBadgeView_1\",\"prop\",\"background\",\"gridLinePaths\",\"comp\",\"_onClick\",\"reactEvent\",\"event\",\"nativeEvent\",\"floor\",\"offsetX\",\"offsetY\",\"setState\",\"size\",\"clientHeight\",\"onClick\",\"style\",\"transform\",\"map\",\"path\",\"stroke\",\"strokeWidth\",\"RelatiBadgeView\",\"Component\",\"props\",\"srtX\",\"srtY\",\"badgeAttr\",\"fill\",\"id\"],\"mappings\":\"aACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,EAAAA,EAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,QAAAA,OAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,aAAA,CAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,GAAA,EAAAE,GAAA,iBAAAF,GAAAA,GAAAA,EAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,UAAA,CAAyCT,YAAA,EAAAK,MAAAA,IACzC,EAAAE,GAAA,iBAAAF,EAAA,IAAA,IAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,GAAAA,EAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,EAAAA,EAAAmC,EAAA,mBClFAhC,EAAAD,QAAAkC,qFCgBA,IAAAC,EAAA,WAMI,SAAAA,EACWC,EACAC,GADAC,KAAAF,MAAAA,EACAE,KAAAD,KAAAA,EAPJC,KAAAC,KAAuB,SACvBD,KAAAE,OAAwC,GACxCF,KAAAG,QAA8B,GAC9BH,KAAAI,QAA8B,GAoCzC,OA7BIP,EAAAL,UAAAa,GAAA,SAAGH,EAA+CD,GAC9C,GAAsB,iBAAXC,EAAqB,OAAOF,KAAKE,OAAOA,GAEnD,GAAa,QAATD,EAAgB,CAChB,IAAuB,IAAAK,EAAA,EAAAC,EAAAL,EAAAI,EAAAC,EAAAC,OAAAF,IAAQ,CAA1B,IAAIG,EAAUF,EAAAD,GACf,GAAIN,KAAKE,OAAOO,GAAa,OAAO,EAGxC,OAAO,EAEP,IAAuB,IAAAC,EAAA,EAAAC,EAAAT,EAAAQ,EAAAC,EAAAH,OAAAE,IAAQ,CAAtBD,EAAUE,EAAAD,GACf,IAAKV,KAAKE,OAAOO,GAAa,OAAO,EAGzC,OAAO,GAIfZ,EAAAL,UAAAoB,KAAA,eAAK,IAAAC,EAAA,GAAAP,EAAA,EAAAA,EAAAQ,UAAAN,OAAAF,IAAAO,EAAAP,GAAAQ,UAAAR,GACD,IAAmB,IAAAI,EAAA,EAAAK,EAAAF,EAAAH,EAAAK,EAAAP,OAAAE,IAAY,CAA1B,IAAIR,EAAMa,EAAAL,GACXV,KAAKE,OAAOA,IAAU,IAI9BL,EAAAL,UAAAwB,KAAA,eAAK,IAAAH,EAAA,GAAAP,EAAA,EAAAA,EAAAQ,UAAAN,OAAAF,IAAAO,EAAAP,GAAAQ,UAAAR,GACD,IAAmB,IAAAI,EAAA,EAAAO,EAAAJ,EAAAH,EAAAO,EAAAT,OAAAE,IAAY,CAA1B,IAAIR,EAAMe,EAAAP,GACXV,KAAKE,OAAOA,IAAU,IAGlCL,EAxCA,GAAanC,EAAAmC,WAAAA,EAgDFnC,EAAAwD,mCAA2E,CAClF,gCACA,gCACA,iCASOxD,EAAAyD,mCAA2E,CAClF,gCACA,gCACA,iCAWOzD,EAAA0D,6BAA4B,CACnC,yBACA,yBACA,iCACG1D,EAAAyD,mCACAzD,EAAAwD,oCASIxD,EAAA2D,6BAA+D,CACtE,yBACA,yBACA,0BAWO3D,EAAA4D,uBAAsB,CAC7B,kBACA,kBACA,0BACG5D,EAAA2D,6BACA3D,EAAA0D,8BAWI1D,EAAA6D,+BAAmE,CAC1E,kBACA,yBACA,yBACA,gCACA,iCAWO7D,EAAA8D,+BAAmE,CAC1E,kBACA,yBACA,yBACA,gCACA,iCAWO9D,EAAA+D,+BAAmE,CAC1E,kBACA,yBACA,yBACA,gCACA,8KC3KJC,EAAAlE,EAAA,IACAkE,EAAAlE,EAAA,gJCDAkE,CAAAlE,EAAA,gJCAAkE,CAAAlE,EAAA,oFCAA,IAAAoC,EAAApC,EAAA,GACAmE,EAAAnE,EAAA,GACAoE,EAAApE,EAAA,GAEAqE,EAAArE,EAAA,IACAsE,EAAAtE,EAAA,IAEIuE,EAAQ,IAAIF,EAAAG,UAAU,EAAG,GACzBC,EAAO,IAAIL,EAAAM,WAAWH,GAE1BE,EAAKE,QAAU,CACX,IAAIP,EAAAQ,aAAaH,EAAM,KACvB,IAAIL,EAAAQ,aAAaH,EAAM,MAG3B,IAAII,EAAYC,SAASC,eAAe,0BAExCD,SAASE,iBAAiB,mBAAoB,WACf,YAAvBF,SAASG,aAEbC,QAAQC,IAAIN,EAAUO,aAEtBjB,EAASkB,OACLjD,EAAAkD,cAAChB,EAAAiB,gBAAe,CAACd,KAAMA,EAAMe,SAAU,EAAGX,UAAWA,IACrDA,MAIPY,OAAehB,KAAOA,iBC5BvBtE,EAAAD,QAAAiE,sJCCAD,EAAAlE,EAAA,IAEAkE,EAAAlE,EAAA,IACAkE,EAAAlE,EAAA,KAIA,IAAA0F,EAAA1F,EAAA,GACSE,EAAAwF,YAAAA,EAET,IAAAC,EAAA3F,EAAA,GACSE,EAAAyF,YAAAA,EAET,IAAAC,EAAA5F,EAAA,GACSE,EAAA0F,kBAAAA,iFCbT,IAAAF,EAAA1F,EAAA,GACA6F,EAAA7F,EAAA,GACA2F,EAAA3F,EAAA,GAEA0E,EAAA,WAKI,SAAAA,EAAmBH,GAAA/B,KAAA+B,MAAAA,EAJZ/B,KAAAsD,KAAO,EACPtD,KAAAmC,QAA0B,GAC1BnC,KAAAE,OAAiB,GAoD5B,OAhDIgC,EAAA1C,UAAA+D,aAAA,WACI,IAAIC,EAAcxD,KAAKmC,QAAQ3B,OAC/B,OAAOR,KAAKmC,QAAQnC,KAAKsD,KAAOE,IAGpCtB,EAAA1C,UAAAiE,WAAA,SAAW1D,GACP,IAAIA,EAAK2D,OAAQ3D,EAAK2D,KAAK5D,MAA3B,CACA,IAAIA,EAAQE,KAAKuD,eAGjB,GAAIvD,KAAKsD,KAAOtD,KAAKmC,QAAQ3B,OACzBT,EAAK2D,KAAO,IAAIP,EAAYQ,aAAa7D,EAAOC,GAChDA,EAAK2D,KAAK9C,KAAK,uBACZ,CAAA,IAAIsC,EAAYU,eAAeC,MAAM,CAAE5B,KALnCjC,KAKyCD,KAAIA,EAAED,MAAKA,IAGxD,OAFHC,EAAK2D,KAAO,IAAIL,EAAAxD,WAAWC,EAAOC,GAClCA,EAAK2D,KAAK9C,KAAK,mBAGnBZ,KAAKsD,OAEL,IAAiB,IAAAhD,EAAA,EAAAI,EAAAV,KAAK+B,MAAM+B,SAAXxD,EAAAI,EAAAF,OAAAF,IAAqB,CAAjC,IAAIyD,EAAIrD,EAAAJ,GACT,GAAKyD,EAAKL,KAEV,IAAmB,IAAAM,EAAA,EAAAC,EAAAF,EAAKL,KAAKvD,QAAV6D,EAAAC,EAAAzD,OAAAwD,IAAmB,CAAvBC,EAAAD,GACJE,GAAG,CAAEjC,KAhBTjC,KAgBeD,KAAIgE,EAAEjE,MAAKA,KAIrC,IAAIqE,EAAQnE,KAAKuD,eAEjB,GAAIvD,KAAKsD,MAAQtD,KAAKmC,QAAQ3B,OAAQ,CAClC,IAAiB,IAAA4D,EAAA,EAAAC,EAAArE,KAAK+B,MAAM+B,SAAXM,EAAAC,EAAA7D,OAAA4D,IAAqB,CAClC,KADKrE,EAAIsE,EAAAD,IACCV,MAAQR,EAAYU,eAAeC,MAAM,CAC/C5B,KAzBDjC,KAyBOD,KAAIA,EAAED,MAAOqE,IACnB,OAGRnE,KAAKE,OAASJ,EAAMwE,MAAQ,OAE5B,IAAiB,IAAAC,EAAA,EAAAC,EAAAxE,KAAK+B,MAAM+B,SAAXS,EAAAC,EAAAhE,OAAA+D,IAAqB,CAClC,KADKxE,EAAIyE,EAAAD,IACCb,MAAQR,EAAYU,eAAeC,MAAM,CAC/C5B,KAjCDjC,KAiCOD,KAAIA,EAAED,MAAKA,IACjB,OAGRE,KAAKE,OAAS,UAG1BgC,EAvDA,GAAaxE,EAAAwE,WAAAA,iFCHFxE,EAAA+G,uBAA6C,CACpD,kBACA,mBAGO/G,EAAAkG,eAAsC,CAC7CC,MAAK,SAACa,GACF,OACIhH,EAAAiH,qBAAqBd,MAAMa,IAC3BhH,EAAAkH,qBAAqBf,MAAMa,IAGnCG,MAAK,SAACH,GACF,OACOhH,EAAAiH,qBAAqBE,MAAMH,GAAMI,OACjCpH,EAAAkH,qBAAqBC,MAAMH,MAK/BhH,EAAAqH,6BAA4B,CACnC,yBACA,iCACGrH,EAAA+G,wBAGI/G,EAAAiH,qBAA4C,CACnDd,MAAK,SAACnD,OAAEZ,EAAAY,EAAAZ,MAAOC,EAAAW,EAAAX,KACX,IAAKA,EAAM,OAAO,EAIlB,IAFA,IAAIiF,EAAcjF,EAAKkF,QAAQ,KAEtBrH,EAAI,EAAGA,EAAIoH,EAAYxE,OAAQ5C,IAAK,CACzC,IAAIsH,EAAaF,EAAYpH,GAS7B,GAPIsH,GACAA,EAAWxB,MACXwB,EAAWxB,KAAK5D,QAAUA,GAC1BoF,EAAWxB,KAAKrD,GACZ3C,EAAAqH,6BAA8B,OAGlB,OAAO,EAG/B,OAAO,GAEXF,MAAK,SAACnE,OAAEZ,EAAAY,EAAAZ,MAAOC,EAAAW,EAAAX,KACX,IAAKA,EAAM,MAAO,GAKlB,IAHA,IAAIiF,EAAcjF,EAAKkF,QAAQ,KAC3BE,EAAgC,GAE3BvH,EAAI,EAAGA,EAAIoH,EAAYxE,OAAQ5C,IAAK,CACzC,IAAIsH,EAAaF,EAAYpH,GAEzBsH,GACAA,EAAWxB,MACXwB,EAAWxB,KAAK5D,QAAUA,GAC1BoF,EAAWxB,KAAKrD,GACZ3C,EAAAqH,6BAA8B,QAKlCI,EAAWC,KAAK,CACZC,OAAQH,EACRI,OAAQ,KAKpB,OAAOH,IAIJzH,EAAA6H,6BAA4B,CACnC,yBACA,iCACG7H,EAAA+G,wBAGI/G,EAAAkH,qBAA4C,CACnDf,MAAK,SAACa,GACF,OACIhH,EAAA8H,2BAA2B3B,MAAMa,IACjChH,EAAA+H,2BAA2B5B,MAAMa,IAGzCG,MAAK,SAACH,GACF,OACOhH,EAAA8H,2BAA2BX,MAAMH,GAAMI,OACvCpH,EAAA+H,2BAA2BZ,MAAMH,MAKrChH,EAAAgI,mCAAkC,CACzC,gCACA,wCACGhI,EAAA6H,8BAGI7H,EAAA8H,2BAAkD,CACzD3B,MAAK,SAACnD,OAAEZ,EAAAY,EAAAZ,MAAOC,EAAAW,EAAAX,KACX,IAAKA,EAAM,OAAO,EAIlB,IAFA,IAAIiF,EAAcjF,EAAKkF,QAAQ,QAEtBrH,EAAI,EAAGA,EAAIoH,EAAYxE,OAAQ5C,GAAK,EAAG,CAC5C,IAAIsH,EAAaF,EAAYpH,GAS7B,GAPIsH,GACAA,EAAWxB,MACXwB,EAAWxB,KAAK5D,QAAUA,GAC1BoF,EAAWxB,KAAKrD,GACZ3C,EAAAgI,mCAAoC,OAO5C,IAFiBV,EAAYpH,EAAI,GACJ8F,KACb,OAAO,EAG3B,OAAO,GAEXmB,MAAK,SAACnE,OAAEZ,EAAAY,EAAAZ,MAAOC,EAAAW,EAAAX,KACX,IAAKA,EAAM,MAAO,GAKlB,IAHA,IAAIiF,EAAcjF,EAAKkF,QAAQ,QAC3BE,EAAgC,GAE3BvH,EAAI,EAAGA,EAAIoH,EAAYxE,OAAQ5C,GAAK,EAAG,CAC5C,IAAIsH,EAAaF,EAAYpH,GAS7B,GAPIsH,GACAA,EAAWxB,MACXwB,EAAWxB,KAAK5D,QAAUA,GAC1BoF,EAAWxB,KAAKrD,GACZ3C,EAAAgI,mCAAoC,OAG5C,CAEA,IAAIC,EAAaX,EAAYpH,EAAI,IACf+H,EAAWjC,MAEzByB,EAAWC,KAAK,CACZC,OAAQH,EACRI,OAAQ,CAACK,MAKrB,OAAOR,IAIJzH,EAAAkI,mCAAkC,CACzC,gCACA,wCACGlI,EAAA6H,8BAGI7H,EAAA+H,2BAAkD,CACzD5B,MAAK,SAACnD,OAAEZ,EAAAY,EAAAZ,MAAOC,EAAAW,EAAAX,KACX,IAAKA,EAAM,OAAO,EAIlB,IAFA,IAAIiF,EAAcjF,EAAKkF,QAAQ,+BAEtBrH,EAAI,EAAGA,EAAIoH,EAAYxE,OAAQ5C,GAAK,EAAG,CAC5C,IAAIsH,EAAaF,EAAYpH,GAS7B,GAPIsH,GACAA,EAAWxB,MACXwB,EAAWxB,KAAK5D,QAAUA,GAC1BoF,EAAWxB,KAAKrD,GACZ3C,EAAAkI,mCAAoC,OAO5C,IAFA,IAAIC,EAAcb,EAAYc,MAAMlI,EAAI,EAAGA,EAAI,GAEtCmI,EAAI,EAAGA,EAAIF,EAAYrF,OAAS,EAAGuF,IAAK,CAC7C,IAAIC,EAAcH,EAAYE,GAC1BE,EAAcJ,EAAYE,EAAI,GAGlC,IADkBC,EAAYtC,OAASuC,EAAYvC,KACnC,OAAO,GAI/B,OAAO,GAEXmB,MAAK,SAACnE,OAAEZ,EAAAY,EAAAZ,MAAOC,EAAAW,EAAAX,KACX,IAAKA,EAAM,MAAO,GAKlB,IAHA,IAAIiF,EAAcjF,EAAKkF,QAAQ,+BAC3BE,EAAgC,GAE3BvH,EAAI,EAAGA,EAAIoH,EAAYxE,OAAQ5C,GAAK,EAAG,CAC5C,IAAIsH,EAAaF,EAAYpH,GAS7B,GAPIsH,GACAA,EAAWxB,MACXwB,EAAWxB,KAAK5D,QAAUA,GAC1BoF,EAAWxB,KAAKrD,GACZ3C,EAAAkI,mCAAoC,OAG5C,CAEA,IAAIC,EAAcb,EAAYc,MAAMlI,EAAI,EAAGA,EAAI,GAE3CoI,EAAcH,EAAY,GAC1BI,EAAcJ,EAAY,IACZG,EAAYtC,OAASuC,EAAYvC,MAEnCyB,EAAWC,KAAK,CAC5BC,OAAQH,EACRI,OAAQ,CACJU,EACAC,KAIJD,EAAcH,EAAY,GAC1BI,EAAcJ,EAAY,IACZG,EAAYtC,OAASuC,EAAYvC,MAEnCyB,EAAWC,KAAK,CAC5BC,OAAQH,EACRI,OAAQ,CACJU,EACAC,KAIJD,EAAcH,EAAY,GAC1BI,EAAcJ,EAAY,IACZG,EAAYtC,OAASuC,EAAYvC,MAEnCyB,EAAWC,KAAK,CAC5BC,OAAQH,EACRI,OAAQ,CACJU,EACAC,MAKZ,OAAOd,mFC9PJzH,EAAAwI,uBAA6C,CACpD,mBAGOxI,EAAAyI,eAAsC,CAC7CtC,MAAK,SAACa,GACF,OACIhH,EAAA0I,qBAAqBvC,MAAMa,IAC3BhH,EAAA2I,qBAAqBxC,MAAMa,IAGnCG,MAAK,SAACH,GACF,OACOhH,EAAA0I,qBAAqBvB,MAAMH,GAAMI,OACjCpH,EAAA2I,qBAAqBxB,MAAMH,MAK/BhH,EAAA4I,6BAA4B,CACnC,iCACG5I,EAAAwI,wBAGIxI,EAAA0I,qBAA4C,CACnDvC,MAAK,SAACnD,OAAEZ,EAAAY,EAAAZ,MAAOC,EAAAW,EAAAX,KACX,IAAKA,EAAM,OAAO,EAIlB,IAFA,IAAIwG,EAAcxG,EAAKkF,QAAQ,KAEtBrH,EAAI,EAAGA,EAAI2I,EAAY/F,OAAQ5C,IAAK,CACzC,IAAI4I,EAAaD,EAAY3I,GAS7B,GAPI4I,GACAA,EAAW9C,MACX8C,EAAW9C,KAAK5D,QAAUA,GAC1B0G,EAAW9C,KAAKrD,GACZ3C,EAAA4I,6BAA8B,OAGlB,OAAO,EAG/B,OAAO,GAEXzB,MAAK,SAACnE,OAAEZ,EAAAY,EAAAZ,MAAOC,EAAAW,EAAAX,KACX,IAAKA,EAAM,MAAO,GAKlB,IAHA,IAAIwG,EAAcxG,EAAKkF,QAAQ,KAC3BE,EAAgC,GAE3BvH,EAAI,EAAGA,EAAI2I,EAAY/F,OAAQ5C,IAAK,CACzC,IAAI4I,EAAaD,EAAY3I,GAEzB4I,GACAA,EAAW9C,MACX8C,EAAW9C,KAAK5D,QAAUA,GAC1B0G,EAAW9C,KAAKrD,GACZ3C,EAAA4I,6BAA8B,QAKlCnB,EAAWC,KAAK,CACZC,OAAQmB,EACRlB,OAAQ,KAKpB,OAAOH,IAIJzH,EAAA+I,6BAA4B,CACnC,iCACG/I,EAAAwI,wBAGIxI,EAAA2I,qBAA4C,CACnDxC,MAAK,SAACa,GACF,OACIhH,EAAAgJ,2BAA2B7C,MAAMa,IACjChH,EAAAiJ,2BAA2B9C,MAAMa,IAGzCG,MAAK,SAACH,GACF,OACOhH,EAAAgJ,2BAA2B7B,MAAMH,GAAMI,OACvCpH,EAAAiJ,2BAA2B9B,MAAMH,MAKrChH,EAAAkJ,mCAAkC,CACzC,wCACGlJ,EAAA+I,8BAGI/I,EAAAgJ,2BAAkD,CACzD7C,MAAK,SAACnD,OAAEZ,EAAAY,EAAAZ,MAAOC,EAAAW,EAAAX,KACX,IAAKA,EAAM,OAAO,EAIlB,IAFA,IAAIwG,EAAcxG,EAAKkF,QAAQ,QAEtBrH,EAAI,EAAGA,EAAI2I,EAAY/F,OAAQ5C,GAAK,EAAG,CAC5C,IAAI4I,EAAaD,EAAY3I,GAS7B,GAPI4I,GACAA,EAAW9C,MACX8C,EAAW9C,KAAK5D,QAAUA,GAC1B0G,EAAW9C,KAAKrD,GACZ3C,EAAAkJ,mCAAoC,OAO5C,IAFiBL,EAAY3I,EAAI,GACJ8F,KACb,OAAO,EAG3B,OAAO,GAEXmB,MAAK,SAACnE,OAAEZ,EAAAY,EAAAZ,MAAOC,EAAAW,EAAAX,KACX,IAAKA,EAAM,MAAO,GAKlB,IAHA,IAAIwG,EAAcxG,EAAKkF,QAAQ,QAC3BE,EAAgC,GAE3BvH,EAAI,EAAGA,EAAI2I,EAAY/F,OAAQ5C,GAAK,EAAG,CAC5C,IAAI4I,EAAaD,EAAY3I,GAS7B,GAPI4I,GACAA,EAAW9C,MACX8C,EAAW9C,KAAK5D,QAAUA,GAC1B0G,EAAW9C,KAAKrD,GACZ3C,EAAAkJ,mCAAoC,OAG5C,CAEA,IAAIjB,EAAaY,EAAY3I,EAAI,IACf+H,EAAWjC,MAEzByB,EAAWC,KAAK,CACZC,OAAQmB,EACRlB,OAAQ,CAACK,MAKrB,OAAOR,IAIJzH,EAAAmJ,mCAAkC,CACzC,wCACGnJ,EAAA+I,8BAGI/I,EAAAiJ,2BAAkD,CACzD9C,MAAK,SAACnD,OAAEZ,EAAAY,EAAAZ,MAAOC,EAAAW,EAAAX,KACX,IAAKA,EAAM,OAAO,EAIlB,IAFA,IAAIwG,EAAcxG,EAAKkF,QAAQ,+BAEtBrH,EAAI,EAAGA,EAAI2I,EAAY/F,OAAQ5C,GAAK,EAAG,CAC5C,IAAI4I,EAAaD,EAAY3I,GAS7B,GAPI4I,GACAA,EAAW9C,MACX8C,EAAW9C,KAAK5D,QAAUA,GAC1B0G,EAAW9C,KAAKrD,GACZ3C,EAAAmJ,mCAAoC,OAO5C,IAFA,IAAIhB,EAAcU,EAAYT,MAAMlI,EAAI,EAAGA,EAAI,GAEtCmI,EAAI,EAAGA,EAAIF,EAAYrF,OAAS,EAAGuF,IAAK,CAC7C,IAAIC,EAAcH,EAAYE,GAC1BE,EAAcJ,EAAYE,EAAI,GAGlC,IADkBC,EAAYtC,OAASuC,EAAYvC,KACnC,OAAO,GAI/B,OAAO,GAEXmB,MAAK,SAACnE,OAAEZ,EAAAY,EAAAZ,MAAOC,EAAAW,EAAAX,KACX,IAAKA,EAAM,MAAO,GAKlB,IAHA,IAAIwG,EAAcxG,EAAKkF,QAAQ,+BAC3BE,EAAgC,GAE3BvH,EAAI,EAAGA,EAAI2I,EAAY/F,OAAQ5C,GAAK,EAAG,CAC5C,IAAI4I,EAAaD,EAAY3I,GAS7B,GAPI4I,GACAA,EAAW9C,MACX8C,EAAW9C,KAAK5D,QAAUA,GAC1B0G,EAAW9C,KAAKrD,GACZ3C,EAAAmJ,mCAAoC,OAG5C,CAEA,IAAIhB,EAAcU,EAAYT,MAAMlI,EAAI,EAAGA,EAAI,GAE3CoI,EAAcH,EAAY,GAC1BI,EAAcJ,EAAY,IACZG,EAAYtC,OAASuC,EAAYvC,MAEnCyB,EAAWC,KAAK,CAC5BC,OAAQmB,EACRlB,OAAQ,CACJU,EACAC,KAIJD,EAAcH,EAAY,GAC1BI,EAAcJ,EAAY,IACZG,EAAYtC,OAASuC,EAAYvC,MAEnCyB,EAAWC,KAAK,CAC5BC,OAAQmB,EACRlB,OAAQ,CACJU,EACAC,KAIJD,EAAcH,EAAY,GAC1BI,EAAcJ,EAAY,IACZG,EAAYtC,OAASuC,EAAYvC,MAEnCyB,EAAWC,KAAK,CAC5BC,OAAQmB,EACRlB,OAAQ,CACJU,EACAC,MAKZ,OAAOd,maC5Pf,IAAA9B,EAAA7F,EAAA,GACA4F,EAAA5F,EAAA,GAEAmG,EAAA,SAAAmD,GAAA,SAAAnD,IAAA,IAAAoD,EAAA,OAAAD,GAAAA,EAAAE,MAAAhH,KAAAc,YAAAd,YACW+G,EAAA9G,KAAuB,SACvB8G,EAAA5G,QAAU,CAACiD,EAAkB6D,kBACxC,OAHkCC,EAAAvD,EAAAmD,GAGlCnD,EAHA,CAAkCN,EAAAxD,YAArBnC,EAAAiG,aAAAA,iFCAb,IAAAT,EAAA1F,EAAA,GAEWE,EAAAuJ,eAAmC,CAC1C9I,KAAM,OACN+F,GAAE,SAACxD,OAAEuB,EAAAvB,EAAAuB,KAAMlC,EAAAW,EAAAX,KACP,GACKkC,GAASlC,GAASA,EAAK2D,QACxBzB,EAAKqB,KAAOrB,EAAKE,QAAQ3B,QAF7B,CAOA,IAFA,IAAIV,EAAQC,EAAK2D,KAAK5D,MAELQ,EAAA,EAAA0D,EAAA/B,EAAKF,MAAM+B,SAAXxD,EAAA0D,EAAAxD,OAAAF,IAAqB,CAAjC,IAAIyD,EAAIC,EAAA1D,GACLyD,EAAKL,MAAQK,EAAKL,KAAK5D,QAAUA,IACjCiE,EAAKL,KAAKxD,OAAO,oBAAqB,IAQtD,SAASiH,EAASpH,EAAkBD,GAChC,IAAKC,EAAK2D,MAAQ3D,EAAK2D,KAAKxD,OAAO,mBAAoB,OACvDH,EAAK2D,KAAKxD,OAAO,oBAAqB,EAEtC,IAAIiF,EAAajC,EAAYiD,eAAetB,MAAM,CAAE/E,MAAKA,EAAEC,KAAIA,IAE/D,IAAkB,IAAAO,EAAA,EAAA8G,EAAAjC,EAAA7E,EAAA8G,EAAA5G,OAAAF,IAAY,CAAzB,IAAIuE,EAAKuC,EAAA9G,GACNkG,EAAa3B,EAAMQ,OACvB8B,EAASX,EAAY1G,IAZrBqH,CAASpH,EAAMD,qFClBvB,IAAAsC,EAAA,WAGI,SAAAA,EACWH,EACAqC,GADAtE,KAAAiC,KAAAA,EACAjC,KAAAsE,MAAAA,EAQf,OALIlC,EAAA5C,UAAAiE,WAAA,SAAW1D,GACSC,KAAKiC,KAAKsB,gBACTvD,MACjBA,KAAKiC,KAAKwB,WAAW1D,IAE7BqC,EAbA,GAAa1E,EAAA0E,aAAAA,iaCHb,IAAAiF,EAAA,WAAA,SAAAA,IACcrH,KAAAsH,YAA2C,GAC3CtH,KAAAuH,cAA+C,GAiB7D,OAfcF,EAAA7H,UAAAgI,kBAAV,SAA4BC,EAAiBC,GACzC,OAAO1H,KAAKsH,YAAYG,GAAWC,GAG7BL,EAAA7H,UAAAmI,oBAAV,SAA8BC,EAAmBC,GAC7C,OAAO7H,KAAKuH,cAAcK,GAAaC,GAGpCR,EAAA7H,UAAAsI,iBAAP,SAAwBL,GACpB,cAAczH,KAAKsH,YAAYG,IAG5BJ,EAAA7H,UAAAuI,mBAAP,SAA0BC,GACtB,cAAchI,KAAKuH,cAAcS,IAEzCX,EAnBA,GAAa3J,EAAA2J,mBAAAA,EAqBb,IAAAY,EAAA,SAAAnB,GAWI,SAAAmB,EACWlG,EAAyBmG,EAAkBC,GADtD,IAAApB,EAGID,EAAA/I,KAAAiC,OAAOA,YAFA+G,EAAAhF,MAAAA,EAAyBgF,EAAAmB,EAAAA,EAAkBnB,EAAAoB,EAAAA,EAGlDpB,EAAKqB,WAAa,GAAGC,OAAOC,aAAaJ,EAAI,KAAMC,EAAI,KA0F/D,OAzG0BjB,EAAAe,EAAAnB,GAkBtBmB,EAAAzI,UAAA+I,MAAA,SAAMC,GACF,GAAIxI,KAAKsH,YAAYkB,GACjB,OAAOxI,KAAKsH,YAAYkB,GAO5B,IAJI,IAAEN,EAAFlI,KAAEkI,EAAGC,EAALnI,KAAKmI,EAAGpG,EAAR/B,KAAQ+B,MACR0G,EAAc,EACdC,EAAO,EAEWpI,EAAA,EAAAqI,EAAAH,EAAAlI,EAAAqI,EAAAnI,OAAAF,IAAkB,CAAnC,IAAIsI,EAASD,EAAArI,GACd,OAAQsI,GACJ,IAAK,IAAKH,EAAc,EAAGN,GAAKO,EAAM,MACtC,IAAK,IAAKD,EAAc,EAAGN,GAAKO,EAAM,MACtC,IAAK,IAAKD,EAAc,EAAGP,GAAKQ,EAAM,MACtC,IAAK,IAAKD,EAAc,EAAGP,GAAKQ,EAAM,MAEtC,IAAK,IAAKA,IAAS,EAAG,MAEtB,QACI,IAAIG,EAAYC,SAASF,GACzB,GAAIG,MAAMF,GAAY,MAECH,EAAH,IAAhBD,EAA0BI,EACX,GAAPH,EAAYG,EAExBJ,KAKZ,OAAOzI,KAAKwH,kBACRgB,EACAzG,EAAMiH,MAAMd,IAAMnG,EAAMiH,MAAMd,GAAGC,KAIzCF,EAAAzI,UAAAyF,QAAA,SAAQgE,GACJ,GAAIjJ,KAAKuH,cAAc0B,GACnB,OAAOjJ,KAAKuH,cAAc0B,GAGxB,IAAAC,EAAAjB,EAAAiB,sBAAuBC,EAAAlB,EAAAkB,uBACzBrF,EAAmB,GAEvB,GAAImF,EAAkBG,QAAQ,MAAQ,EAAG,CACrC,IAA6B,IAAA9I,EAAA,EAAAI,EAAAuI,EAAkBI,MAAM,KAAxB/I,EAAAI,EAAAF,OAAAF,IAA8B,CAAtD,IAAIkI,EAAgB9H,EAAAJ,GACrBwD,EAAWA,EAASgB,OAAO9E,KAAKiF,QAAQuD,IAG5C,OAAOxI,KAAK2H,oBACRsB,EACAnF,GAIR,IAAK,IAAIlG,EAAI,EAAGA,EAAIsL,EAAsB1I,OAAQ5C,IAAK,CACnD,IAAI0L,EAAoBJ,EAAsBtL,GAC9C,GAAKqL,EAAkBM,MAAMD,GAA7B,CAEA,IAA8B,IAAAtF,EAAA,EAAAC,EAAAkF,EAAuBvL,GAAvBoG,EAAAC,EAAAzD,OAAAwD,IAA2B,CAApD,IAAIwF,EAAiBvF,EAAAD,GACtBF,EAAWA,EAASgB,OAAO9E,KAAKiF,QAC5BgE,EAAkBQ,QAAQH,EAAmBE,KAIrD,OAAOxJ,KAAK2H,oBACRsB,EACAnF,IAIR,GAAImF,EAAkBG,QAAQ,MAAQ,EAAG,CACrC,IAA6B,IAAAhF,EAAA,EAAAC,EAAA4E,EAAkBI,MAAM,KAAxBjF,EAAAC,EAAA7D,OAAA4D,IAA8B,CAAlDoE,EAAgBnE,EAAAD,GACrBN,EAAWA,EAASgB,OAAO9E,KAAKiF,QAAQuD,IAG5C,OAAOxI,KAAK2H,oBACRsB,EACAnF,GAIR,OAAO9D,KAAK2H,oBACRsB,EACA,CAACjJ,KAAKuI,MAAMU,MAnGbhB,EAAAiB,sBAAwB,CAAC,KAAM,KAAM,KAAM,KAAM,MACjDjB,EAAAkB,uBAAyB,CAC5B,CAAC,IAAK,KAAM,CAAC,IAAK,KAClB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,KAAM,KAAM,KAAM,MACnB,CAAC,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,OAiG/ClB,EAzGA,CAA0BZ,GAAb3J,EAAAuK,KAAAA,EA2Gb,IAAAjG,EAAA,SAAA8E,GAII,SAAA9E,EAAmB0H,EAAsBC,GAAzC,IAAA5C,EACID,EAAA/I,KAAAiC,OAAOA,KADQ+G,EAAA2C,MAAAA,EAAsB3C,EAAA4C,OAAAA,EAHlC5C,EAAAiC,MAAkB,GAClBjC,EAAAjD,SAAmB,GAItB,IAAK,IAAIoE,EAAI,EAAGA,EAAIwB,EAAOxB,IAAK,CAG5B,IAFA,IAAI0B,EAAU,GAELzB,EAAI,EAAGA,EAAIwB,EAAQxB,IAAK,CAC7B,IAAIpI,EAAO,IAAIkI,EAAKlB,EAAMmB,EAAGC,GAC7ByB,EAAQxE,KAAKrF,GACbgH,EAAKjD,SAASsB,KAAKrF,GACnBgH,EAAKO,YAAYvH,EAAKqI,YAAcrI,EAGxCgH,EAAKiC,MAAM5D,KAAKwE,YA8F5B,OA9G+B1C,EAAAlF,EAAA8E,GAoBpB9E,EAAAxC,UAAA+I,MAAP,SAAasB,GACT,GAAI7J,KAAKsH,YAAYuC,GACjB,OAAO7J,KAAKsH,YAAYuC,GAG5B,IAAIzB,EAAayB,EACb3B,EAAIE,EAAW,GAAG0B,WAAW,GAAK,GAClC3B,EAAIW,SAASV,EAAW2B,OAAO,EAAG3B,EAAW5H,OAAS,IAAM,EAEhE,OAAOR,KAAKwH,kBACRqC,EACA7J,KAAKgJ,MAAMd,IAAMlI,KAAKgJ,MAAMd,GAAGC,KAIhCnG,EAAAxC,UAAAyF,QAAP,SAAe+E,GACX,GAAIhK,KAAKuH,cAAcyC,GACnB,OAAOhK,KAAKuH,cAAcyC,GAG9B,IAAIlG,EAAmB,GACjB4F,EAAF1J,KAAE0J,MAAOC,EAAT3J,KAAS2J,OAEb,GAA2B,MAAvBK,EAA4B,OAAOhK,KAAK8D,SAE5C,GAAIkG,EAAmBZ,QAAQ,MAAQ,EAAG,CACtC,IAAuB,IAAA9I,EAAA,EAAA0D,EAAAgG,EAAmBX,MAAM,KAAzB/I,EAAA0D,EAAAxD,OAAAF,IAA+B,CAAjD,IAAI8H,EAAUpE,EAAA1D,GACfwD,EAAWA,EAASgB,OAAO9E,KAAKiF,QAAQmD,IAG5C,OAAOpI,KAAK2H,oBACRqC,EACAlG,GAIR,GAAIkG,EAAmBZ,QAAQ,KAAM,CAWjC,IAVA,IAAIa,EAAcD,EAAmBX,MAAM,KACvCa,EAAkBD,EAAY,GAC9BE,EAAgBF,EAAY,GAC5BG,EAAYpK,KAAKuI,MAAM2B,GACvBG,EAAUrK,KAAKuI,MAAM4B,GACrBG,EAASC,KAAKC,IAAIJ,EAAUlC,EAAGmC,EAAQnC,GACvCuC,EAAOF,KAAKG,IAAIN,EAAUlC,EAAGmC,EAAQnC,GACrCyC,EAASJ,KAAKC,IAAIJ,EAAUjC,EAAGkC,EAAQlC,GACvCyC,EAAOL,KAAKG,IAAIN,EAAUjC,EAAGkC,EAAQlC,GAEhCD,EAAIoC,EAAQpC,GAAKuC,EAAMvC,IAC5B,IAAK,IAAIC,EAAIwC,EAAQxC,GAAKyC,EAAMzC,IAAK,CACjC,IAAIpI,EAAOC,KAAKgJ,MAAMd,IAAMlI,KAAKgJ,MAAMd,GAAGC,GAC1CrE,EAASsB,KAAKrF,GAItB,OAAOC,KAAK2H,oBACRqC,EACAlG,GAIJqE,EAAIW,SAASkB,GAEjB,IAAKjB,MAAMZ,GAAI,CACX,IAASD,EAAI,EAAGA,EAAIwB,EAAOxB,IACvBpE,EAASsB,KAAKpF,KAAKgJ,MAAMd,GAAGC,IAGhC,OAAOnI,KAAK2H,oBACRqC,EACAlG,GAED,GAAkC,IAA9BkG,EAAmBxJ,OAAc,CAGxC,IAFI0H,EAAI8B,EAAmBF,WAAW,GAAK,GAElC3B,EAAI,EAAGA,EAAIwB,EAAQxB,IACxBrE,EAASsB,KAAKpF,KAAKgJ,MAAMd,GAAGC,IAGhC,OAAOnI,KAAK2H,oBACRqC,EACAlG,GAKR,OAAO9D,KAAK2H,oBACRqC,EACA,CAAChK,KAAKuI,MAAMyB,MAGxBhI,EA9GA,CAA+BqF,GAAlB3J,EAAAsE,UAAAA,iaChIb,IAAApC,EAAApC,EAAA,GAEAqN,EAAArN,EAAA,IAQAuF,EAAA,SAAA+D,GAMI,SAAA/D,EAAY+H,GAAZ,IAAA/D,EACID,EAAA/I,KAAAiC,KAAM8K,IAAK9K,KACX+G,EAAK9E,KAAO6I,EAAK7I,KACjB8E,EAAK/D,SAAW8H,EAAK9H,SACrB+D,EAAK1E,UAAYyI,EAAKzI,UAEtB0E,EAAKrC,MAAQ,CACTqG,WAAY,GACZjH,SAAUiD,EAAK9E,KAAKF,MAAM+B,SAC1BkH,cAAe,IAMnB,IAHM,IAAAjJ,EAAAgF,EAAA9E,KAAAF,MACAiB,EAAA+D,EAAA/D,SAEGkF,EAAI,EAAGA,EAAInG,EAAM2H,MAAOxB,IAC7BnB,EAAKrC,MAAMsG,cAAc5F,KACrB,KAAK8C,EAAIlF,EAAQ,QAAQjB,EAAM4H,OAAS3G,GAIhD,IAAK,IAAImF,EAAI,EAAGA,EAAIpG,EAAM4H,OAAQxB,IAC9BpB,EAAKrC,MAAMsG,cAAc5F,KACrB,OAAO+C,EAAInF,EAAQ,MAAMjB,EAAM2H,MAAQ1G,UAI9CC,OAAegI,KAAOlE,IAwC/B,OAzEqCG,EAAAnE,EAAA+D,GAoCzB/D,EAAAvD,UAAA0L,SAAR,SAAiBC,GACb,IAAIC,EAAQD,EAAWE,YACjBtJ,EAAA/B,KAAAiC,KAAAF,MAEFmG,EAAYqC,KAAKe,MAAMF,EAAMG,QAAU,GACvCpD,EAAYoC,KAAKe,MAAMF,EAAMI,QAAU,GACvCzL,EAAOgC,EAAMiH,MAAMd,IAAMnG,EAAMiH,MAAMd,GAAGC,GAE5CnI,KAAKiC,KAAKwB,WAAW1D,GACrBC,KAAKyL,SAAS,CAAE3H,SAAU/B,EAAM+B,YAGpCf,EAAAvD,UAAAqD,OAAA,WACU,IAAAR,EAAArC,KAAAqC,UACAN,EAAA/B,KAAAiC,KAAAF,MAEF2J,EAAO,SAGP,IAHgBnB,KAAKC,IACrBnI,EAAUO,aAA6B,EAAdb,EAAM2H,OAC/BrH,EAAUsJ,cAA+B,EAAf5J,EAAM4H,SAC5B,IAER,OACI/J,EAAAkD,cAAA,MAAA,CAAK4G,MAAM,KAAKC,OAAO,KAAKiC,QAAS5L,KAAKkL,SAAS9L,KAAKY,MAAO6L,MAAO,CAClEC,UAAa,SAASJ,EAAI,MAE1B9L,EAAAkD,cAAA,IAAA,KAAI9C,KAAK0E,MAAMqG,YACfnL,EAAAkD,cAAA,IAAA,KAAI9C,KAAK0E,MAAMsG,cAAce,IACzB,SAACC,GAAiB,OACdpM,EAAAkD,cAAA,OAAA,CAAM5E,EAAG8N,EAAMC,OAAO,OAAOC,YAAY,WAGjDtM,EAAAkD,cAAA,IAAA,KAAI9C,KAAK0E,MAAMZ,SAASiI,IACpB,SAAChM,GAAqB,OAAAH,EAAAkD,cAAC+H,EAAAsB,gBAAe,CAACpM,KAAMA,SAKjEgD,EAzEA,CAAqCnD,EAAMwM,WAA9B1O,EAAAqF,gBAAAA,iaCVb,IAAAnD,EAAApC,EAAA,GAOA2O,EAAA,SAAArF,GAAA,SAAAqF,mDAqDA,OArDqCjF,EAAAiF,EAAArF,GACjCqF,EAAA3M,UAAAqD,OAAA,WACI,IAAI9C,EAAOC,KAAKqM,MAAMtM,KAClBuE,EAAuB,GAEvBgI,EAAgB,EAATvM,EAAKmI,EAAQ,EACpBqE,EAAgB,EAATxM,EAAKoI,EAAQ,EACpBsC,EAAgB,EAAT1K,EAAKmI,EAAQ,EACpB0C,EAAgB,EAAT7K,EAAKoI,EAAQ,EAEpBqE,EAAY,CACZtO,EAAK,GACLgO,YAAe,MACfD,OAAU,GACVQ,KAAQ,QAGZ,IAAK1M,EAAK2D,KAAM,OAAO9D,EAAAkD,cAAA,IAAA,CAAG4J,GAAI3M,EAAKqI,YAAa9D,GAEhD,OAAQvE,EAAK2D,KAAK5D,MAAMwE,OACpB,IAAK,IACDkI,EAAa,EAAI,4BACTF,EAAO,KAAG,KAAIC,EAAO,KAAG,wIAKhCC,EAAkB,OAAI,UACtB,MACJ,IAAK,IACDA,EAAa,EAAI,2BACTF,EAAI,IAAIC,EAAI,MAAM9B,EAAI,IAAIG,EAAI,2BAC9BH,EAAI,IAAI8B,EAAI,MAAMD,EAAI,IAAI1B,EAAI,qBAEtC4B,EAAkB,OAAI,YAiB9B,OAbIzM,EAAK2D,KAAKrD,GAAG,oBACbmM,EAAuB,YAAI,IAC3BlI,EAAMc,KAAKxF,EAAMkD,cAAc,OAAQ0J,IACvCA,EAAUP,OAAS,UACnBO,EAAuB,YAAI,MAC3BlI,EAAMc,KAAKxF,EAAMkD,cAAc,OAAQ0J,KAChCzM,EAAK2D,KAAKrD,GAAG,mBACpBiE,EAAMc,KAAKxF,EAAMkD,cAAc,OAAQ0J,KAEvCA,EAAUP,OAAS,OACnB3H,EAAMc,KAAKxF,EAAMkD,cAAc,OAAQ0J,KAGpC5M,EAAAkD,cAAA,IAAA,CAAG4J,GAAI3M,EAAKqI,YAAa9D,IAExC6H,EArDA,CAAqCvM,EAAMwM,WAA9B1O,EAAAyO,gBAAAA\",\"sourcesContent\":[\" \\t// The module cache\\n \\tvar installedModules = {};\\n\\n \\t// The require function\\n \\tfunction __webpack_require__(moduleId) {\\n\\n \\t\\t// Check if module is in cache\\n \\t\\tif(installedModules[moduleId]) {\\n \\t\\t\\treturn installedModules[moduleId].exports;\\n \\t\\t}\\n \\t\\t// Create a new module (and put it into the cache)\\n \\t\\tvar module = installedModules[moduleId] = {\\n \\t\\t\\ti: moduleId,\\n \\t\\t\\tl: false,\\n \\t\\t\\texports: {}\\n \\t\\t};\\n\\n \\t\\t// Execute the module function\\n \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n\\n \\t\\t// Flag the module as loaded\\n \\t\\tmodule.l = true;\\n\\n \\t\\t// Return the exports of the module\\n \\t\\treturn module.exports;\\n \\t}\\n\\n\\n \\t// expose the modules object (__webpack_modules__)\\n \\t__webpack_require__.m = modules;\\n\\n \\t// expose the module cache\\n \\t__webpack_require__.c = installedModules;\\n\\n \\t// define getter function for harmony exports\\n \\t__webpack_require__.d = function(exports, name, getter) {\\n \\t\\tif(!__webpack_require__.o(exports, name)) {\\n \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n \\t\\t}\\n \\t};\\n\\n \\t// define __esModule on exports\\n \\t__webpack_require__.r = function(exports) {\\n \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n \\t\\t}\\n \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n \\t};\\n\\n \\t// create a fake namespace object\\n \\t// mode & 1: value is a module id, require it\\n \\t// mode & 2: merge all properties of value into the ns\\n \\t// mode & 4: return value when already ns object\\n \\t// mode & 8|1: behave like require\\n \\t__webpack_require__.t = function(value, mode) {\\n \\t\\tif(mode & 1) value = __webpack_require__(value);\\n \\t\\tif(mode & 8) return value;\\n \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n \\t\\tvar ns = Object.create(null);\\n \\t\\t__webpack_require__.r(ns);\\n \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n \\t\\treturn ns;\\n \\t};\\n\\n \\t// getDefaultExport function for compatibility with non-harmony modules\\n \\t__webpack_require__.n = function(module) {\\n \\t\\tvar getter = module && module.__esModule ?\\n \\t\\t\\tfunction getDefault() { return module['default']; } :\\n \\t\\t\\tfunction getModuleExports() { return module; };\\n \\t\\t__webpack_require__.d(getter, 'a', getter);\\n \\t\\treturn getter;\\n \\t};\\n\\n \\t// Object.prototype.hasOwnProperty.call\\n \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n\\n \\t// __webpack_public_path__\\n \\t__webpack_require__.p = \\\"\\\";\\n\\n\\n \\t// Load entry module and return exports\\n \\treturn __webpack_require__(__webpack_require__.s = 5);\\n\",\"module.exports = React;\",\"import { RelatiRoleEffect, RelatiRoleAction } from \\\"./RelatiRole\\\";\\nimport { RelatiPlayer } from \\\"./RelatiPlayer\\\";\\nimport { RelatiGrid } from \\\"./RelatiBoard\\\";\\nimport { RelatiGameState } from \\\"./RelatiGame\\\";\\n\\nexport type RelatiRoleType = \\\"normal\\\" | \\\"leader\\\" | \\\"wizard\\\";\\n\\nexport type RelatiRoleStatus = (\\n    RelatiRoleStatusRelati\\n);\\n\\nexport interface RelatiRole {\\n    is(status: RelatiRoleStatus): boolean;\\n    is(status: RelatiRoleStatus[], type: \\\"all\\\" | \\\"any\\\"): boolean;\\n}\\n\\nexport class RelatiRole {\\n    public type: RelatiRoleType = \\\"normal\\\";\\n    public status: { [status: string]: boolean } = {};\\n    public effects: RelatiRoleEffect[] = [];\\n    public actions: RelatiRoleAction[] = [];\\n\\n    constructor(\\n        public owner: RelatiPlayer,\\n        public grid: RelatiGrid\\n    ) { }\\n\\n    is(status: RelatiRoleStatus | RelatiRoleStatus[], type?: \\\"all\\\" | \\\"any\\\") {\\n        if (typeof status === \\\"string\\\") return this.status[status];\\n\\n        if (type === \\\"any\\\") {\\n            for (var statusName of status) {\\n                if (this.status[statusName]) return true;\\n            }\\n\\n            return false;\\n        } else {\\n            for (var statusName of status) {\\n                if (!this.status[statusName]) return false;\\n            }\\n\\n            return true;\\n        }\\n    }\\n\\n    gain(...statusList: RelatiRoleStatus[]) {\\n        for (var status of statusList) {\\n            this.status[status] = true;\\n        }\\n    }\\n\\n    lost(...statusList: RelatiRoleStatus[]) {\\n        for (var status of statusList) {\\n            this.status[status] = false;\\n        }\\n    }\\n}\\n\\nexport type RelatiRoleStatusRelatiRemoteStable = (\\n    \\\"relati-remote-stable-launcher\\\" |\\n    \\\"relati-remote-stable-repeater\\\" |\\n    \\\"relati-remote-stable-receiver\\\"\\n);\\n\\nexport var RelatiRoleStatusRelatiRemoteStable: RelatiRoleStatusRelatiRemoteStable[] = [\\n    \\\"relati-remote-stable-launcher\\\",\\n    \\\"relati-remote-stable-repeater\\\",\\n    \\\"relati-remote-stable-receiver\\\"\\n];\\n\\nexport type RelatiRoleStatusRelatiRemoteNormal = (\\n    \\\"relati-remote-normal-launcher\\\" |\\n    \\\"relati-remote-normal-repeater\\\" |\\n    \\\"relati-remote-normal-receiver\\\"\\n);\\n\\nexport var RelatiRoleStatusRelatiRemoteNormal: RelatiRoleStatusRelatiRemoteNormal[] = [\\n    \\\"relati-remote-normal-launcher\\\",\\n    \\\"relati-remote-normal-repeater\\\",\\n    \\\"relati-remote-normal-receiver\\\"\\n];\\n\\nexport type RelatiRoleStatusRelatiRemote = (\\n    \\\"relati-remote-launcher\\\" |\\n    \\\"relati-remote-repeater\\\" |\\n    \\\"relati-remote-receiver\\\" |\\n    RelatiRoleStatusRelatiRemoteNormal |\\n    RelatiRoleStatusRelatiRemoteStable\\n);\\n\\nexport var RelatiRoleStatusRelatiRemote: RelatiRoleStatusRelatiRemote[] = [\\n    \\\"relati-remote-launcher\\\",\\n    \\\"relati-remote-repeater\\\",\\n    \\\"relati-remote-receiver\\\",\\n    ...RelatiRoleStatusRelatiRemoteNormal,\\n    ...RelatiRoleStatusRelatiRemoteStable\\n];\\n\\nexport type RelatiRoleStatusRelatiNormal = (\\n    \\\"relati-normal-launcher\\\" |\\n    \\\"relati-normal-repeater\\\" |\\n    \\\"relati-normal-receiver\\\"\\n);\\n\\nexport var RelatiRoleStatusRelatiNormal: RelatiRoleStatusRelatiNormal[] = [\\n    \\\"relati-normal-launcher\\\",\\n    \\\"relati-normal-repeater\\\",\\n    \\\"relati-normal-receiver\\\"\\n];\\n\\nexport type RelatiRoleStatusRelati = (\\n    \\\"relati-launcher\\\" |\\n    \\\"relati-repeater\\\" |\\n    \\\"relati-receiver\\\" |\\n    RelatiRoleStatusRelatiNormal |\\n    RelatiRoleStatusRelatiRemote\\n);\\n\\nexport var RelatiRoleStatusRelati: RelatiRoleStatusRelati[] = [\\n    \\\"relati-launcher\\\",\\n    \\\"relati-repeater\\\",\\n    \\\"relati-receiver\\\",\\n    ...RelatiRoleStatusRelatiNormal,\\n    ...RelatiRoleStatusRelatiRemote\\n];\\n\\nexport type RelatiRoleStatusRelatiLauncher = (\\n    \\\"relati-launcher\\\" |\\n    \\\"relati-normal-launcher\\\" |\\n    \\\"relati-remote-launcher\\\" |\\n    \\\"relati-remote-normal-launcher\\\" |\\n    \\\"relati-remote-stable-launcher\\\"\\n);\\n\\nexport var RelatiRoleStatusRelatiLauncher: RelatiRoleStatusRelatiLauncher[] = [\\n    \\\"relati-launcher\\\",\\n    \\\"relati-normal-launcher\\\",\\n    \\\"relati-remote-launcher\\\",\\n    \\\"relati-remote-normal-launcher\\\",\\n    \\\"relati-remote-stable-launcher\\\"\\n];\\n\\nexport type RelatiRoleStatusRelatiRepeater = (\\n    \\\"relati-repeater\\\" |\\n    \\\"relati-normal-repeater\\\" |\\n    \\\"relati-remote-repeater\\\" |\\n    \\\"relati-remote-normal-repeater\\\" |\\n    \\\"relati-remote-stable-repeater\\\"\\n);\\n\\nexport var RelatiRoleStatusRelatiRepeater: RelatiRoleStatusRelatiRepeater[] = [\\n    \\\"relati-repeater\\\",\\n    \\\"relati-normal-repeater\\\",\\n    \\\"relati-remote-repeater\\\",\\n    \\\"relati-remote-normal-repeater\\\",\\n    \\\"relati-remote-stable-repeater\\\"\\n];\\n\\nexport type RelatiRoleStatusRelatiReceiver = (\\n    \\\"relati-receiver\\\" |\\n    \\\"relati-normal-receiver\\\" |\\n    \\\"relati-remote-receiver\\\" |\\n    \\\"relati-remote-normal-receiver\\\" |\\n    \\\"relati-remote-stable-receiver\\\"\\n);\\n\\nexport var RelatiRoleStatusRelatiReceiver: RelatiRoleStatusRelatiReceiver[] = [\\n    \\\"relati-receiver\\\",\\n    \\\"relati-normal-receiver\\\",\\n    \\\"relati-remote-receiver\\\",\\n    \\\"relati-remote-normal-receiver\\\",\\n    \\\"relati-remote-stable-receiver\\\"\\n];\\n\\nexport interface RelatiRoleAction extends RelatiRoleEffect { }\\n\\nexport interface RelatiRoleEffect {\\n    name: string;\\n    do(state: RelatiGameState): void;\\n}\",\"export * from \\\"./RelatiRules/RelatiBySource\\\";\\nexport * from \\\"./RelatiRules/RelatiToTarget\\\";\",\"export * from \\\"./RelatiRoles/RelatiLeader\\\";\",\"export * from \\\"./RelatiRoleEffects/RelatiMaintain\\\";\",\"import * as React from \\\"react\\\";\\nimport * as ReactDOM from \\\"react-dom\\\";\\nimport { RelatiGame, RelatiPlayer } from \\\"../relati/Relati\\\";\\n\\nimport { GridBoard } from \\\"../relati/GridBoard\\\";\\nimport { RelatiBoardView } from \\\"./components/RelatiViews/RelatiBoardView\\\";\\n\\nvar board = new GridBoard(9, 9);\\nvar game = new RelatiGame(board);\\n\\ngame.players = [\\n    new RelatiPlayer(game, \\\"O\\\"),\\n    new RelatiPlayer(game, \\\"X\\\")\\n];\\n\\nvar container = document.getElementById(\\\"relati-board-container\\\");\\n\\ndocument.addEventListener(\\\"readystatechange\\\", function () {\\n    if (document.readyState != \\\"complete\\\") return;\\n\\n    console.log(container.clientWidth);\\n\\n    ReactDOM.render(\\n        <RelatiBoardView game={game} gridSize={5} container={container} />,\\n        container\\n    );\\n});\\n\\n(window as any).game = game;\",\"module.exports = ReactDOM;\",\"export * from \\\"./Relati/RelatiBoard\\\";\\nexport * from \\\"./Relati/RelatiRole\\\";\\n\\nexport * from \\\"./Relati/RelatiGame\\\";\\nexport * from \\\"./Relati/RelatiPlayer\\\";\\n\\nexport * from \\\"./Relati/RelatiRule\\\";\\n\\nimport * as RelatiRules from \\\"./Relati/RelatiRules\\\";\\nexport { RelatiRules };\\n\\nimport * as RelatiRoles from \\\"./Relati/RelatiRoles\\\";\\nexport { RelatiRoles };\\n\\nimport * as RelatiRoleEffects from \\\"./Relati/RelatiRoleEffects\\\";\\nexport { RelatiRoleEffects };\",\"import { RelatiBoard, RelatiGrid } from \\\"./RelatiBoard\\\";\\nimport { RelatiPlayer } from \\\"./RelatiPlayer\\\";\\nimport * as RelatiRules  from \\\"./RelatiRules\\\";\\nimport { RelatiRole } from \\\"./RelatiRole\\\";\\nimport * as RelatiRoles  from \\\"./RelatiRoles\\\";\\n\\nexport class RelatiGame {\\n    public turn = 0;\\n    public players: RelatiPlayer[] = [];\\n    public status: string = \\\"\\\";\\n\\n    constructor(public board: RelatiBoard) { }\\n\\n    getNowPlayer() {\\n        var totalPlayer = this.players.length;\\n        return this.players[this.turn % totalPlayer];\\n    }\\n\\n    selectGrid(grid: RelatiGrid) {\\n        if (grid.role && grid.role.owner) return;\\n        var owner = this.getNowPlayer();\\n        var game = this;\\n\\n        if (this.turn < this.players.length) {\\n            grid.role = new RelatiRoles.RelatiLeader(owner, grid);\\n            grid.role.gain(\\\"relati-launcher\\\");\\n        } else if (RelatiRules.RelatiBySource.allow({ game, grid, owner })) {\\n            grid.role = new RelatiRole(owner, grid);\\n            grid.role.gain(\\\"relati-receiver\\\");\\n        } else return;\\n\\n        this.turn++;\\n\\n        for (let grid of this.board.gridList) {\\n            if (!grid.role) continue;\\n\\n            for (var effect of grid.role.effects) {\\n                effect.do({ game, grid, owner });\\n            }\\n        }\\n\\n        var enemy = this.getNowPlayer();\\n\\n        if (this.turn >= this.players.length) {\\n            for (var grid of this.board.gridList) {\\n                if (!grid.role && RelatiRules.RelatiBySource.allow({\\n                    game, grid, owner: enemy\\n                })) return;\\n            }\\n\\n            this.status = owner.badge + \\\" Win\\\";\\n\\n            for (var grid of this.board.gridList) {\\n                if (!grid.role && RelatiRules.RelatiBySource.allow({\\n                    game, grid, owner\\n                })) return;\\n            }\\n\\n            this.status = \\\"Draw\\\";\\n        }\\n    }\\n}\\n\\nexport interface RelatiGameState {\\n    game?: RelatiGame,\\n    owner?: RelatiPlayer,\\n    grid?: RelatiGrid\\n}\",\"import { RelatiRuleTrace, RelatiRuleTraceable } from \\\"../RelatiRule\\\";\\nimport { RelatiRoleStatus } from \\\"../RelatiRole\\\";\\n\\nexport var RelatiSourceGridStatus: RelatiRoleStatus[] = [\\n    \\\"relati-launcher\\\",\\n    \\\"relati-repeater\\\"\\n];\\n\\nexport var RelatiBySource: RelatiRuleTraceable = {\\n    allow(state) {\\n        return (\\n            RelatiNormalBySource.allow(state) ||\\n            RelatiRemoteBySource.allow(state)\\n        );\\n    },\\n    trace(state) {\\n        return [\\n            ...RelatiNormalBySource.trace(state),\\n            ...RelatiRemoteBySource.trace(state)\\n        ];\\n    }\\n};\\n\\nexport var RelatiNormalSourceGridStatus: RelatiRoleStatus[] = [\\n    \\\"relati-normal-launcher\\\",\\n    \\\"relati-normal-repeater\\\",\\n    ...RelatiSourceGridStatus\\n];\\n\\nexport var RelatiNormalBySource: RelatiRuleTraceable = {\\n    allow({ owner, grid }) {\\n        if (!grid) return false;\\n\\n        var sourceGrids = grid.queries(\\\"O\\\");\\n\\n        for (var i = 0; i < sourceGrids.length; i++) {\\n            var sourceGrid = sourceGrids[i];\\n            var sourceReliable = (\\n                sourceGrid &&\\n                sourceGrid.role &&\\n                sourceGrid.role.owner === owner &&\\n                sourceGrid.role.is(\\n                    RelatiNormalSourceGridStatus, \\\"any\\\"\\n                )\\n            );\\n            if (sourceReliable) return true;\\n        }\\n\\n        return false;\\n    },\\n    trace({ owner, grid }) {\\n        if (!grid) return [];\\n\\n        var sourceGrids = grid.queries(\\\"O\\\");\\n        var ruleTraces: RelatiRuleTrace[] = [];\\n\\n        for (var i = 0; i < sourceGrids.length; i++) {\\n            var sourceGrid = sourceGrids[i];\\n            var sourceReliable = (\\n                sourceGrid &&\\n                sourceGrid.role &&\\n                sourceGrid.role.owner === owner &&\\n                sourceGrid.role.is(\\n                    RelatiNormalSourceGridStatus, \\\"any\\\"\\n                )\\n            );\\n\\n            if (sourceReliable) {\\n                ruleTraces.push({\\n                    target: sourceGrid,\\n                    routes: []\\n                });\\n            }\\n        }\\n\\n        return ruleTraces;\\n    }\\n};\\n\\nexport var RelatiRemoteSourceGridStatus: RelatiRoleStatus[] = [\\n    \\\"relati-remote-launcher\\\",\\n    \\\"relati-remote-repeater\\\",\\n    ...RelatiSourceGridStatus\\n];\\n\\nexport var RelatiRemoteBySource: RelatiRuleTraceable = {\\n    allow(state) {\\n        return (\\n            RelatiRemoteNormalBySource.allow(state) ||\\n            RelatiRemoteStableBySource.allow(state)\\n        );\\n    },\\n    trace(state) {\\n        return [\\n            ...RelatiRemoteNormalBySource.trace(state),\\n            ...RelatiRemoteStableBySource.trace(state)\\n        ];\\n    }\\n};\\n\\nexport var RelatiRemoteNormalSourceGridStatus: RelatiRoleStatus[] = [\\n    \\\"relati-remote-normal-launcher\\\",\\n    \\\"relati-remote-normal-repeater\\\",\\n    ...RelatiRemoteSourceGridStatus\\n];\\n\\nexport var RelatiRemoteNormalBySource: RelatiRuleTraceable = {\\n    allow({ owner, grid }) {\\n        if (!grid) return false;\\n\\n        var sourceGrids = grid.queries(\\\"2O,O\\\");\\n\\n        for (var i = 0; i < sourceGrids.length; i += 2) {\\n            var sourceGrid = sourceGrids[i];\\n            var sourceReliable = (\\n                sourceGrid &&\\n                sourceGrid.role &&\\n                sourceGrid.role.owner === owner &&\\n                sourceGrid.role.is(\\n                    RelatiRemoteNormalSourceGridStatus, \\\"any\\\"\\n                )\\n            );\\n            if (!sourceReliable) continue;\\n\\n            var middleGrid = sourceGrids[i + 1];\\n            var notBlocked = !middleGrid.role;\\n            if (notBlocked) return true;\\n        }\\n\\n        return false;\\n    },\\n    trace({ owner, grid }) {\\n        if (!grid) return [];\\n\\n        var sourceGrids = grid.queries(\\\"2O,O\\\");\\n        var ruleTraces: RelatiRuleTrace[] = [];\\n\\n        for (var i = 0; i < sourceGrids.length; i += 2) {\\n            var sourceGrid = sourceGrids[i];\\n            var sourceReliable = (\\n                sourceGrid &&\\n                sourceGrid.role &&\\n                sourceGrid.role.owner === owner &&\\n                sourceGrid.role.is(\\n                    RelatiRemoteNormalSourceGridStatus, \\\"any\\\"\\n                )\\n            );\\n            if (!sourceReliable) continue;\\n\\n            var middleGrid = sourceGrids[i + 1];\\n            var notBlocked = !middleGrid.role;\\n            if (notBlocked) {\\n                ruleTraces.push({\\n                    target: sourceGrid,\\n                    routes: [middleGrid]\\n                });\\n            }\\n        }\\n\\n        return ruleTraces;\\n    }\\n};\\n\\nexport var RelatiRemoteStableSourceGridStatus: RelatiRoleStatus[] = [\\n    \\\"relati-remote-stable-launcher\\\",\\n    \\\"relati-remote-stable-repeater\\\",\\n    ...RelatiRemoteSourceGridStatus\\n];\\n\\nexport var RelatiRemoteStableBySource: RelatiRuleTraceable = {\\n    allow({ owner, grid }) {\\n        if (!grid) return false;\\n\\n        var sourceGrids = grid.queries(\\\"IIH,II,I,IH,H,IHH,HH,H,HI,I\\\");\\n\\n        for (var i = 0; i < sourceGrids.length; i += 5) {\\n            var sourceGrid = sourceGrids[i];\\n            var sourceReliable = (\\n                sourceGrid &&\\n                sourceGrid.role &&\\n                sourceGrid.role.owner === owner &&\\n                sourceGrid.role.is(\\n                    RelatiRemoteStableSourceGridStatus, \\\"any\\\"\\n                )\\n            );\\n            if (!sourceReliable) continue;\\n\\n            var middleGrids = sourceGrids.slice(i + 1, i + 5);\\n\\n            for (var j = 0; j < middleGrids.length - 1; j++) {\\n                var middleGrid1 = middleGrids[j];\\n                var middleGrid2 = middleGrids[j + 1];\\n\\n                var notBlocked = !middleGrid1.role && !middleGrid2.role;\\n                if (notBlocked) return true;\\n            }\\n        }\\n\\n        return false;\\n    },\\n    trace({ owner, grid }) {\\n        if (!grid) return [];\\n\\n        var sourceGrids = grid.queries(\\\"IIH,II,I,IH,H,IHH,HH,H,HI,I\\\");\\n        var ruleTraces: RelatiRuleTrace[] = [];\\n\\n        for (var i = 0; i < sourceGrids.length; i += 5) {\\n            var sourceGrid = sourceGrids[i];\\n            var sourceReliable = (\\n                sourceGrid &&\\n                sourceGrid.role &&\\n                sourceGrid.role.owner === owner &&\\n                sourceGrid.role.is(\\n                    RelatiRemoteStableSourceGridStatus, \\\"any\\\"\\n                )\\n            );\\n            if (!sourceReliable) continue;\\n\\n            var middleGrids = sourceGrids.slice(i + 1, i + 5);\\n\\n            var middleGrid1 = middleGrids[1];\\n            var middleGrid2 = middleGrids[0];\\n            var notBlocked = !middleGrid1.role && !middleGrid2.role;\\n\\n            if (notBlocked) ruleTraces.push({\\n                target: sourceGrid,\\n                routes: [\\n                    middleGrid1,\\n                    middleGrid2\\n                ]\\n            });\\n\\n            var middleGrid1 = middleGrids[1];\\n            var middleGrid2 = middleGrids[2];\\n            var notBlocked = !middleGrid1.role && !middleGrid2.role;\\n\\n            if (notBlocked) ruleTraces.push({\\n                target: sourceGrid,\\n                routes: [\\n                    middleGrid1,\\n                    middleGrid2\\n                ]\\n            });\\n\\n            var middleGrid1 = middleGrids[3];\\n            var middleGrid2 = middleGrids[2];\\n            var notBlocked = !middleGrid1.role && !middleGrid2.role;\\n\\n            if (notBlocked) ruleTraces.push({\\n                target: sourceGrid,\\n                routes: [\\n                    middleGrid1,\\n                    middleGrid2\\n                ]\\n            });\\n        }\\n\\n        return ruleTraces;\\n    }\\n};\",\"import { RelatiRuleTrace, RelatiRuleTraceable } from \\\"../RelatiRule\\\";\\nimport { RelatiRoleStatus } from \\\"../RelatiRole\\\";\\n\\nexport var RelatiTargetGridStatus: RelatiRoleStatus[] = [\\n    \\\"relati-receiver\\\"\\n];\\n\\nexport var RelatiToTarget: RelatiRuleTraceable = {\\n    allow(state) {\\n        return (\\n            RelatiNormalToTarget.allow(state) ||\\n            RelatiRemoteToTarget.allow(state)\\n        );\\n    },\\n    trace(state) {\\n        return [\\n            ...RelatiNormalToTarget.trace(state),\\n            ...RelatiRemoteToTarget.trace(state)\\n        ];\\n    }\\n};\\n\\nexport var RelatiNormalTargetGridStatus: RelatiRoleStatus[] = [\\n    \\\"relati-normal-receiver\\\",\\n    ...RelatiTargetGridStatus\\n];\\n\\nexport var RelatiNormalToTarget: RelatiRuleTraceable = {\\n    allow({ owner, grid }) {\\n        if (!grid) return false;\\n\\n        var targetGrids = grid.queries(\\\"O\\\");\\n\\n        for (var i = 0; i < targetGrids.length; i++) {\\n            var targetGrid = targetGrids[i];\\n            var targetReliable = (\\n                targetGrid &&\\n                targetGrid.role &&\\n                targetGrid.role.owner === owner &&\\n                targetGrid.role.is(\\n                    RelatiNormalTargetGridStatus, \\\"any\\\"\\n                )\\n            );\\n            if (targetReliable) return true;\\n        }\\n\\n        return false;\\n    },\\n    trace({ owner, grid }) {\\n        if (!grid) return [];\\n\\n        var targetGrids = grid.queries(\\\"O\\\");\\n        var ruleTraces: RelatiRuleTrace[] = [];\\n\\n        for (var i = 0; i < targetGrids.length; i++) {\\n            var targetGrid = targetGrids[i];\\n            var targetReliable = (\\n                targetGrid &&\\n                targetGrid.role &&\\n                targetGrid.role.owner === owner &&\\n                targetGrid.role.is(\\n                    RelatiNormalTargetGridStatus, \\\"any\\\"\\n                )\\n            );\\n\\n            if (targetReliable) {\\n                ruleTraces.push({\\n                    target: targetGrid,\\n                    routes: []\\n                });\\n            }\\n        }\\n\\n        return ruleTraces;\\n    }\\n};\\n\\nexport var RelatiRemoteTargetGridStatus: RelatiRoleStatus[] = [\\n    \\\"relati-remote-receiver\\\",\\n    ...RelatiTargetGridStatus\\n];\\n\\nexport var RelatiRemoteToTarget: RelatiRuleTraceable = {\\n    allow(state) {\\n        return (\\n            RelatiRemoteNormalToTarget.allow(state) ||\\n            RelatiRemoteStableToTarget.allow(state)\\n        );\\n    },\\n    trace(state) {\\n        return [\\n            ...RelatiRemoteNormalToTarget.trace(state),\\n            ...RelatiRemoteStableToTarget.trace(state)\\n        ];\\n    }\\n};\\n\\nexport var RelatiRemoteNormalTargetGridStatus: RelatiRoleStatus[] = [\\n    \\\"relati-remote-normal-receiver\\\",\\n    ...RelatiRemoteTargetGridStatus\\n];\\n\\nexport var RelatiRemoteNormalToTarget: RelatiRuleTraceable = {\\n    allow({ owner, grid }) {\\n        if (!grid) return false;\\n\\n        var targetGrids = grid.queries(\\\"2O,O\\\");\\n\\n        for (var i = 0; i < targetGrids.length; i += 2) {\\n            var targetGrid = targetGrids[i];\\n            var targetReliable = (\\n                targetGrid &&\\n                targetGrid.role &&\\n                targetGrid.role.owner === owner &&\\n                targetGrid.role.is(\\n                    RelatiRemoteNormalTargetGridStatus, \\\"any\\\"\\n                )\\n            );\\n            if (!targetReliable) continue;\\n\\n            var middleGrid = targetGrids[i + 1];\\n            var notBlocked = !middleGrid.role;\\n            if (notBlocked) return true;\\n        }\\n\\n        return false;\\n    },\\n    trace({ owner, grid }) {\\n        if (!grid) return [];\\n\\n        var targetGrids = grid.queries(\\\"2O,O\\\");\\n        var ruleTraces: RelatiRuleTrace[] = [];\\n\\n        for (var i = 0; i < targetGrids.length; i += 2) {\\n            var targetGrid = targetGrids[i];\\n            var targetReliable = (\\n                targetGrid &&\\n                targetGrid.role &&\\n                targetGrid.role.owner === owner &&\\n                targetGrid.role.is(\\n                    RelatiRemoteNormalTargetGridStatus, \\\"any\\\"\\n                )\\n            );\\n            if (!targetReliable) continue;\\n\\n            var middleGrid = targetGrids[i + 1];\\n            var notBlocked = !middleGrid.role;\\n            if (notBlocked) {\\n                ruleTraces.push({\\n                    target: targetGrid,\\n                    routes: [middleGrid]\\n                });\\n            }\\n        }\\n\\n        return ruleTraces;\\n    }\\n};\\n\\nexport var RelatiRemoteStableTargetGridStatus: RelatiRoleStatus[] = [\\n    \\\"relati-remote-stable-receiver\\\",\\n    ...RelatiRemoteTargetGridStatus\\n];\\n\\nexport var RelatiRemoteStableToTarget: RelatiRuleTraceable = {\\n    allow({ owner, grid }) {\\n        if (!grid) return false;\\n\\n        var targetGrids = grid.queries(\\\"IIH,II,I,IH,H,IHH,HH,H,HI,I\\\");\\n\\n        for (var i = 0; i < targetGrids.length; i += 5) {\\n            var targetGrid = targetGrids[i];\\n            var targetReliable = (\\n                targetGrid &&\\n                targetGrid.role &&\\n                targetGrid.role.owner === owner &&\\n                targetGrid.role.is(\\n                    RelatiRemoteStableTargetGridStatus, \\\"any\\\"\\n                )\\n            );\\n            if (!targetReliable) continue;\\n\\n            var middleGrids = targetGrids.slice(i + 1, i + 5);\\n\\n            for (var j = 0; j < middleGrids.length - 1; j++) {\\n                var middleGrid1 = middleGrids[j];\\n                var middleGrid2 = middleGrids[j + 1];\\n\\n                var notBlocked = !middleGrid1.role && !middleGrid2.role;\\n                if (notBlocked) return true;\\n            }\\n        }\\n\\n        return false;\\n    },\\n    trace({ owner, grid }) {\\n        if (!grid) return [];\\n\\n        var targetGrids = grid.queries(\\\"IIH,II,I,IH,H,IHH,HH,H,HI,I\\\");\\n        var ruleTraces: RelatiRuleTrace[] = [];\\n\\n        for (var i = 0; i < targetGrids.length; i += 5) {\\n            var targetGrid = targetGrids[i];\\n            var targetReliable = (\\n                targetGrid &&\\n                targetGrid.role &&\\n                targetGrid.role.owner === owner &&\\n                targetGrid.role.is(\\n                    RelatiRemoteStableTargetGridStatus, \\\"any\\\"\\n                )\\n            );\\n            if (!targetReliable) continue;\\n\\n            var middleGrids = targetGrids.slice(i + 1, i + 5);\\n\\n            var middleGrid1 = middleGrids[1];\\n            var middleGrid2 = middleGrids[0];\\n            var notBlocked = !middleGrid1.role && !middleGrid2.role;\\n\\n            if (notBlocked) ruleTraces.push({\\n                target: targetGrid,\\n                routes: [\\n                    middleGrid1,\\n                    middleGrid2\\n                ]\\n            });\\n\\n            var middleGrid1 = middleGrids[1];\\n            var middleGrid2 = middleGrids[2];\\n            var notBlocked = !middleGrid1.role && !middleGrid2.role;\\n\\n            if (notBlocked) ruleTraces.push({\\n                target: targetGrid,\\n                routes: [\\n                    middleGrid1,\\n                    middleGrid2\\n                ]\\n            });\\n\\n            var middleGrid1 = middleGrids[3];\\n            var middleGrid2 = middleGrids[2];\\n            var notBlocked = !middleGrid1.role && !middleGrid2.role;\\n\\n            if (notBlocked) ruleTraces.push({\\n                target: targetGrid,\\n                routes: [\\n                    middleGrid1,\\n                    middleGrid2\\n                ]\\n            });\\n        }\\n\\n        return ruleTraces;\\n    }\\n};\\n\",\"import { RelatiRole, RelatiRoleType } from \\\"../RelatiRole\\\";\\nimport * as RelatiRoleEffects from \\\"../RelatiRoleEffects\\\";\\n\\nexport class RelatiLeader extends RelatiRole {\\n    public type: RelatiRoleType = \\\"leader\\\";\\n    public effects = [RelatiRoleEffects.RelatiMaintain];\\n}\",\"import { RelatiRoleEffect } from \\\"../RelatiRole\\\";\\nimport { RelatiGrid } from \\\"../RelatiBoard\\\";\\nimport { RelatiPlayer } from \\\"../RelatiPlayer\\\";\\nimport * as RelatiRules from \\\"../RelatiRules\\\";\\n\\nexport var RelatiMaintain: RelatiRoleEffect = {\\n    name: \\\"\\\",\\n    do({ game, grid }) {\\n        if (\\n            !game || !grid || !grid.role ||\\n            game.turn < game.players.length\\n        ) return;\\n\\n        var owner = grid.role.owner;\\n\\n        for (let grid of game.board.gridList) {\\n            if (grid.role && grid.role.owner === owner) {\\n                grid.role.status[\\\"relati-repeater\\\"] = false;\\n            }\\n        }\\n\\n        maintain(grid, owner);\\n    }\\n};\\n\\nfunction maintain(grid: RelatiGrid, owner: RelatiPlayer) {\\n    if (!grid.role || grid.role.status[\\\"relati-repeater\\\"]) return;\\n    grid.role.status[\\\"relati-repeater\\\"] = true;\\n\\n    var ruleTraces = RelatiRules.RelatiToTarget.trace({ owner, grid });\\n\\n    for (var trace of ruleTraces) {\\n        var targetGrid = trace.target;\\n        maintain(targetGrid, owner);\\n    }\\n}\",\"import { RelatiGame } from \\\"./RelatiGame\\\";\\nimport { RelatiGrid } from \\\"./RelatiBoard\\\";\\n\\nexport class RelatiPlayer {\\n    [prop: string]: any;\\n\\n    constructor(\\n        public game: RelatiGame,\\n        public badge: string\\n    ) { }\\n\\n    selectGrid(grid: RelatiGrid) {\\n        var nowPlayer = this.game.getNowPlayer();\\n        if (nowPlayer != this) return;\\n        this.game.selectGrid(grid);\\n    }\\n}\",\"export class GridQueryCacheable {\\n    protected _queryCache: { [command: string]: Grid } = {};\\n    protected _queriesCache: { [command: string]: Grid[] } = {};\\n\\n    protected _cacheQueryResult(command: string, result: Grid) {\\n        return this._queryCache[command] = result;\\n    }\\n\\n    protected _cacheQueriesResult(commmands: string, results: Grid[]) {\\n        return this._queriesCache[commmands] = results;\\n    }\\n\\n    public clearQueryResult(command: string) {\\n        return delete this._queryCache[command];\\n    }\\n\\n    public clearQueriesResult(commands: string) {\\n        return delete this._queriesCache[commands];\\n    }\\n}\\n\\nexport class Grid extends GridQueryCacheable {\\n    public coordinate: string;\\n\\n    static simplifyDirectionList = [/I/g, /H/g, /T/g, /X/g, /O/g];\\n    static originalDirectionLists = [\\n        [\\\"F\\\", \\\"B\\\"], [\\\"R\\\", \\\"L\\\"],\\n        [\\\"F\\\", \\\"B\\\", \\\"R\\\", \\\"L\\\"],\\n        [\\\"FR\\\", \\\"FL\\\", \\\"BR\\\", \\\"BL\\\"],\\n        [\\\"F\\\", \\\"B\\\", \\\"R\\\", \\\"L\\\", \\\"FR\\\", \\\"FL\\\", \\\"BR\\\", \\\"BL\\\"]\\n    ];\\n\\n    constructor(\\n        public board: GridBoard, public x: number, public y: number\\n    ) {\\n        super();\\n        this.coordinate = `${String.fromCharCode(x + 65)}${y + 1}`;\\n    }\\n\\n    query(directionCommand: string): Grid {\\n        if (this._queryCache[directionCommand]) {\\n            return this._queryCache[directionCommand];\\n        }\\n\\n        var { x, y, board } = this;\\n        var unitCarried = 1;\\n        var unit = 1;\\n\\n        for (var direction of directionCommand) {\\n            switch (direction) {\\n                case \\\"F\\\": unitCarried = 1; y -= unit; break;\\n                case \\\"B\\\": unitCarried = 1; y += unit; break;\\n                case \\\"R\\\": unitCarried = 1; x += unit; break;\\n                case \\\"L\\\": unitCarried = 1; x -= unit; break;\\n\\n                case \\\"-\\\": unit *= -1; break;\\n\\n                default:\\n                    var unitValue = parseInt(direction);\\n                    if (isNaN(unitValue)) break;\\n\\n                    if (unitCarried === 1) unit = unitValue;\\n                    else unit = unit * 10 + unitValue;\\n\\n                    unitCarried++;\\n                    break;\\n            }\\n        }\\n\\n        return this._cacheQueryResult(\\n            directionCommand,\\n            board.grids[x] && board.grids[x][y]\\n        );\\n    }\\n\\n    queries(directionCommands: string): Grid[] {\\n        if (this._queriesCache[directionCommands]) {\\n            return this._queriesCache[directionCommands];\\n        }\\n\\n        var { simplifyDirectionList, originalDirectionLists } = Grid;\\n        var gridList: Grid[] = [];\\n\\n        if (directionCommands.indexOf(\\\";\\\") > -1) {\\n            for (var directionCommand of directionCommands.split(\\\";\\\")) {\\n                gridList = gridList.concat(this.queries(directionCommand));\\n            }\\n\\n            return this._cacheQueriesResult(\\n                directionCommands,\\n                gridList\\n            );\\n        }\\n\\n        for (var i = 0; i < simplifyDirectionList.length; i++) {\\n            var simplifyDirection = simplifyDirectionList[i];\\n            if (!directionCommands.match(simplifyDirection)) continue;\\n\\n            for (var originalDirection of originalDirectionLists[i]) {\\n                gridList = gridList.concat(this.queries(\\n                    directionCommands.replace(simplifyDirection, originalDirection)\\n                ));\\n            }\\n\\n            return this._cacheQueriesResult(\\n                directionCommands,\\n                gridList\\n            );\\n        }\\n\\n        if (directionCommands.indexOf(\\\",\\\") > -1) {\\n            for (var directionCommand of directionCommands.split(\\\",\\\")) {\\n                gridList = gridList.concat(this.queries(directionCommand));\\n            }\\n\\n            return this._cacheQueriesResult(\\n                directionCommands,\\n                gridList\\n            );\\n        }\\n\\n        return this._cacheQueriesResult(\\n            directionCommands,\\n            [this.query(directionCommands)]\\n        );\\n    }\\n}\\n\\nexport class GridBoard extends GridQueryCacheable {\\n    public grids: Grid[][] = [];\\n    public gridList: Grid[] = [];\\n\\n    constructor(public width: number, public height: number) {\\n        super();\\n        for (var x = 0; x < width; x++) {\\n            var gridRow = [];\\n\\n            for (var y = 0; y < height; y++) {\\n                var grid = new Grid(this, x, y);\\n                gridRow.push(grid);\\n                this.gridList.push(grid);\\n                this._queryCache[grid.coordinate] = grid;\\n            }\\n\\n            this.grids.push(gridRow);\\n        }\\n    }\\n\\n    public query(coordinateCommand: string): Grid {\\n        if (this._queryCache[coordinateCommand]) {\\n            return this._queryCache[coordinateCommand];\\n        }\\n\\n        var coordinate = coordinateCommand;\\n        var x = coordinate[0].charCodeAt(0) - 65;\\n        var y = parseInt(coordinate.substr(1, coordinate.length - 1)) - 1;\\n\\n        return this._cacheQueryResult(\\n            coordinateCommand,\\n            this.grids[x] && this.grids[x][y]\\n        );\\n    }\\n\\n    public queries(coordinateCommands: string): Grid[] {\\n        if (this._queriesCache[coordinateCommands]) {\\n            return this._queriesCache[coordinateCommands];\\n        }\\n\\n        var gridList: Grid[] = [];\\n        var { width, height } = this;\\n\\n        if (coordinateCommands === \\\"*\\\") return this.gridList;\\n\\n        if (coordinateCommands.indexOf(\\\",\\\") > -1) {\\n            for (var coordinate of coordinateCommands.split(\\\",\\\")) {\\n                gridList = gridList.concat(this.queries(coordinate));\\n            }\\n\\n            return this._cacheQueriesResult(\\n                coordinateCommands,\\n                gridList\\n            );\\n        }\\n\\n        if (coordinateCommands.indexOf(\\\":\\\")) {\\n            var coordinates = coordinateCommands.split(\\\":\\\");\\n            var startCoordinate = coordinates[0];\\n            var endCoordinate = coordinates[1];\\n            var startGrid = this.query(startCoordinate);\\n            var endGrid = this.query(endCoordinate);\\n            var startX = Math.min(startGrid.x, endGrid.x);\\n            var endX = Math.max(startGrid.x, endGrid.x);\\n            var startY = Math.min(startGrid.y, endGrid.y);\\n            var endY = Math.max(startGrid.y, endGrid.y);\\n\\n            for (var x = startX; x <= endX; x++) {\\n                for (var y = startY; y <= endY; y++) {\\n                    var grid = this.grids[x] && this.grids[x][y];\\n                    gridList.push(grid);\\n                }\\n            }\\n\\n            return this._cacheQueriesResult(\\n                coordinateCommands,\\n                gridList\\n            );\\n        }\\n\\n        var y = parseInt(coordinateCommands);\\n\\n        if (!isNaN(y)) {\\n            for (var x = 0; x < width; x++) {\\n                gridList.push(this.grids[x][y]);\\n            }\\n\\n            return this._cacheQueriesResult(\\n                coordinateCommands,\\n                gridList\\n            );\\n        } else if (coordinateCommands.length === 1) {\\n            var x = coordinateCommands.charCodeAt(0) - 65;\\n\\n            for (var y = 0; y < height; y++) {\\n                gridList.push(this.grids[x][y]);\\n            }\\n\\n            return this._cacheQueriesResult(\\n                coordinateCommands,\\n                gridList\\n            );\\n        }\\n\\n\\n        return this._cacheQueriesResult(\\n            coordinateCommands,\\n            [this.query(coordinateCommands)]\\n        );\\n    }\\n}\",\"import * as React from \\\"react\\\";\\nimport { RelatiGame, RelatiGrid } from \\\"../../../relati/Relati\\\";\\nimport { RelatiBadgeView } from \\\"./RelatiBadgeView\\\";\\n\\ninterface RelatBoardViewProp {\\n    game: RelatiGame,\\n    gridSize: number,\\n    container: HTMLElement\\n}\\n\\nexport class RelatiBoardView extends React.Component<RelatBoardViewProp> {\\n    public game: RelatiGame;\\n    public gridSize: number;\\n    public container: HTMLElement;\\n    public state: { [state: string]: any };\\n\\n    constructor(prop: RelatBoardViewProp) {\\n        super(prop);\\n        this.game = prop.game;\\n        this.gridSize = prop.gridSize;\\n        this.container = prop.container;\\n\\n        this.state = {\\n            background: [],\\n            gridList: this.game.board.gridList,\\n            gridLinePaths: []\\n        };\\n\\n        var { board } = this.game;\\n        var { gridSize } = this;\\n\\n        for (var x = 1; x < board.width; x++) {\\n            this.state.gridLinePaths.push(\\n                `M ${x * gridSize} 0 V ${board.height * gridSize}`\\n            );\\n        }\\n\\n        for (var y = 1; y < board.height; y++) {\\n            this.state.gridLinePaths.push(\\n                `M 0 ${y * gridSize} H ${board.width * gridSize}`\\n            );\\n        }\\n\\n        (window as any).comp = this;\\n    }\\n\\n    private _onClick(reactEvent: React.MouseEvent) {\\n        var event = reactEvent.nativeEvent;\\n        var { board } = this.game;\\n\\n        var x: number = Math.floor(event.offsetX / 5),\\n            y: number = Math.floor(event.offsetY / 5),\\n            grid = board.grids[x] && board.grids[x][y];\\n\\n        this.game.selectGrid(grid);\\n        this.setState({ gridList: board.gridList });\\n    }\\n\\n    render() {\\n        var { container } = this;\\n        var { board } = this.game;\\n\\n        var size = `scale(${Math.min(\\n            container.clientWidth / (board.width * 5),\\n            container.clientHeight / (board.height * 5)\\n        ) * 0.95})`;\\n\\n        return (\\n            <svg width=\\\"45\\\" height=\\\"45\\\" onClick={this._onClick.bind(this)} style={{\\n                \\\"transform\\\": `scale(${size})`\\n            }}>\\n                <g>{this.state.background}</g>\\n                <g>{this.state.gridLinePaths.map(\\n                    (path: string) => (\\n                        <path d={path} stroke=\\\"#888\\\" strokeWidth=\\\"0.4\\\"></path>\\n                    )\\n                )}</g>\\n                <g>{this.state.gridList.map(\\n                    (grid: RelatiGrid) => <RelatiBadgeView grid={grid} />\\n                )}</g>\\n            </svg>\\n        );\\n    }\\n}\",\"import * as React from \\\"react\\\";\\nimport { RelatiGrid } from \\\"../../../relati/Relati\\\";\\n\\ninterface RelatiBadgeViewProp {\\n    grid: RelatiGrid;\\n}\\n\\nexport class RelatiBadgeView extends React.Component<RelatiBadgeViewProp> {\\n    render() {\\n        var grid = this.props.grid;\\n        var badge: JSX.Element[] = [];\\n\\n        var srtX = grid.x * 5 + 1;\\n        var srtY = grid.y * 5 + 1;\\n        var endX = grid.x * 5 + 4;\\n        var endY = grid.y * 5 + 4;\\n\\n        var badgeAttr = {\\n            \\\"d\\\": \\\"\\\",\\n            \\\"strokeWidth\\\": \\\"0.6\\\",\\n            \\\"stroke\\\": \\\"\\\",\\n            \\\"fill\\\": \\\"none\\\"\\n        };\\n\\n        if (!grid.role) return <g id={grid.coordinate}>{badge}</g>;\\n\\n        switch (grid.role.owner.badge) {\\n            case \\\"O\\\":\\n                badgeAttr[\\\"d\\\"] = `\\n                    M ${srtX + 1.5} ${srtY + 1.5}\\n                    m 0 -1.5\\n                    a 1.5 1.5 0 0 1, 0 3\\n                    a 1.5 1.5 0 0 1, 0 -3\\n                `;\\n                badgeAttr[\\\"stroke\\\"] = \\\"crimson\\\";\\n                break;\\n            case \\\"X\\\":\\n                badgeAttr[\\\"d\\\"] = `\\n                    M ${srtX} ${srtY} L ${endX} ${endY}\\n                    M ${endX} ${srtY} L ${srtX} ${endY}\\n                `;\\n                badgeAttr[\\\"stroke\\\"] = \\\"royalblue\\\";\\n                break;\\n        }\\n\\n        if (grid.role.is(\\\"relati-launcher\\\")) {\\n            badgeAttr[\\\"strokeWidth\\\"] = \\\"1\\\";\\n            badge.push(React.createElement(\\\"path\\\", badgeAttr));\\n            badgeAttr.stroke = \\\"#f2f2f2\\\";\\n            badgeAttr[\\\"strokeWidth\\\"] = \\\"0.5\\\";\\n            badge.push(React.createElement(\\\"path\\\", badgeAttr));\\n        } else if (grid.role.is(\\\"relati-repeater\\\")) {\\n            badge.push(React.createElement(\\\"path\\\", badgeAttr));\\n        } else {\\n            badgeAttr.stroke = \\\"#666\\\";\\n            badge.push(React.createElement(\\\"path\\\", badgeAttr));\\n        }\\n\\n        return <g id={grid.coordinate}>{badge}</g>;\\n    }\\n}\"]}","code":"!function(e){var t={};function r(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=5)}([function(e,t){e.exports=React},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){this.owner=e,this.grid=t,this.type=\"normal\",this.status={},this.effects=[],this.actions=[]}return e.prototype.is=function(e,t){if(\"string\"==typeof e)return this.status[e];if(\"any\"===t){for(var r=0,a=e;r<a.length;r++){var i=a[r];if(this.status[i])return!0}return!1}for(var o=0,n=e;o<n.length;o++){i=n[o];if(!this.status[i])return!1}return!0},e.prototype.gain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,a=e;r<a.length;r++){var i=a[r];this.status[i]=!0}},e.prototype.lost=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,a=e;r<a.length;r++){var i=a[r];this.status[i]=!1}},e}();t.RelatiRole=a,t.RelatiRoleStatusRelatiRemoteStable=[\"relati-remote-stable-launcher\",\"relati-remote-stable-repeater\",\"relati-remote-stable-receiver\"],t.RelatiRoleStatusRelatiRemoteNormal=[\"relati-remote-normal-launcher\",\"relati-remote-normal-repeater\",\"relati-remote-normal-receiver\"],t.RelatiRoleStatusRelatiRemote=[\"relati-remote-launcher\",\"relati-remote-repeater\",\"relati-remote-receiver\"].concat(t.RelatiRoleStatusRelatiRemoteNormal,t.RelatiRoleStatusRelatiRemoteStable),t.RelatiRoleStatusRelatiNormal=[\"relati-normal-launcher\",\"relati-normal-repeater\",\"relati-normal-receiver\"],t.RelatiRoleStatusRelati=[\"relati-launcher\",\"relati-repeater\",\"relati-receiver\"].concat(t.RelatiRoleStatusRelatiNormal,t.RelatiRoleStatusRelatiRemote),t.RelatiRoleStatusRelatiLauncher=[\"relati-launcher\",\"relati-normal-launcher\",\"relati-remote-launcher\",\"relati-remote-normal-launcher\",\"relati-remote-stable-launcher\"],t.RelatiRoleStatusRelatiRepeater=[\"relati-repeater\",\"relati-normal-repeater\",\"relati-remote-repeater\",\"relati-remote-normal-repeater\",\"relati-remote-stable-repeater\"],t.RelatiRoleStatusRelatiReceiver=[\"relati-receiver\",\"relati-normal-receiver\",\"relati-remote-receiver\",\"relati-remote-normal-receiver\",\"relati-remote-stable-receiver\"]},function(e,t,r){\"use strict\";function a(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),a(r(9)),a(r(10))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(11))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(12))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(0),i=r(6),o=r(7),n=r(14),l=r(15),u=new n.GridBoard(9,9),s=new o.RelatiGame(u);s.players=[new o.RelatiPlayer(s,\"O\"),new o.RelatiPlayer(s,\"X\")];var c=document.getElementById(\"relati-board-container\");document.addEventListener(\"readystatechange\",function(){\"complete\"==document.readyState&&(console.log(c.clientWidth),i.render(a.createElement(l.RelatiBoardView,{game:s,gridSize:5,container:c}),c))}),window.game=s},function(e,t){e.exports=ReactDOM},function(e,t,r){\"use strict\";function a(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),a(r(1)),a(r(8)),a(r(13));var i=r(2);t.RelatiRules=i;var o=r(3);t.RelatiRoles=o;var n=r(4);t.RelatiRoleEffects=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(2),i=r(1),o=r(3),n=function(){function e(e){this.board=e,this.turn=0,this.players=[],this.status=\"\"}return e.prototype.getNowPlayer=function(){var e=this.players.length;return this.players[this.turn%e]},e.prototype.selectGrid=function(e){if(!e.role||!e.role.owner){var t=this.getNowPlayer();if(this.turn<this.players.length)e.role=new o.RelatiLeader(t,e),e.role.gain(\"relati-launcher\");else{if(!a.RelatiBySource.allow({game:this,grid:e,owner:t}))return;e.role=new i.RelatiRole(t,e),e.role.gain(\"relati-receiver\")}this.turn++;for(var r=0,n=this.board.gridList;r<n.length;r++){var l=n[r];if(l.role)for(var u=0,s=l.role.effects;u<s.length;u++){s[u].do({game:this,grid:l,owner:t})}}var c=this.getNowPlayer();if(this.turn>=this.players.length){for(var h=0,f=this.board.gridList;h<f.length;h++){if(!(e=f[h]).role&&a.RelatiBySource.allow({game:this,grid:e,owner:c}))return}this.status=t.badge+\" Win\";for(var d=0,g=this.board.gridList;d<g.length;d++){if(!(e=g[d]).role&&a.RelatiBySource.allow({game:this,grid:e,owner:t}))return}this.status=\"Draw\"}}},e}();t.RelatiGame=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.RelatiSourceGridStatus=[\"relati-launcher\",\"relati-repeater\"],t.RelatiBySource={allow:function(e){return t.RelatiNormalBySource.allow(e)||t.RelatiRemoteBySource.allow(e)},trace:function(e){return t.RelatiNormalBySource.trace(e).concat(t.RelatiRemoteBySource.trace(e))}},t.RelatiNormalSourceGridStatus=[\"relati-normal-launcher\",\"relati-normal-repeater\"].concat(t.RelatiSourceGridStatus),t.RelatiNormalBySource={allow:function(e){var r=e.owner,a=e.grid;if(!a)return!1;for(var i=a.queries(\"O\"),o=0;o<i.length;o++){var n=i[o];if(n&&n.role&&n.role.owner===r&&n.role.is(t.RelatiNormalSourceGridStatus,\"any\"))return!0}return!1},trace:function(e){var r=e.owner,a=e.grid;if(!a)return[];for(var i=a.queries(\"O\"),o=[],n=0;n<i.length;n++){var l=i[n];l&&l.role&&l.role.owner===r&&l.role.is(t.RelatiNormalSourceGridStatus,\"any\")&&o.push({target:l,routes:[]})}return o}},t.RelatiRemoteSourceGridStatus=[\"relati-remote-launcher\",\"relati-remote-repeater\"].concat(t.RelatiSourceGridStatus),t.RelatiRemoteBySource={allow:function(e){return t.RelatiRemoteNormalBySource.allow(e)||t.RelatiRemoteStableBySource.allow(e)},trace:function(e){return t.RelatiRemoteNormalBySource.trace(e).concat(t.RelatiRemoteStableBySource.trace(e))}},t.RelatiRemoteNormalSourceGridStatus=[\"relati-remote-normal-launcher\",\"relati-remote-normal-repeater\"].concat(t.RelatiRemoteSourceGridStatus),t.RelatiRemoteNormalBySource={allow:function(e){var r=e.owner,a=e.grid;if(!a)return!1;for(var i=a.queries(\"2O,O\"),o=0;o<i.length;o+=2){var n=i[o];if(n&&n.role&&n.role.owner===r&&n.role.is(t.RelatiRemoteNormalSourceGridStatus,\"any\"))if(!i[o+1].role)return!0}return!1},trace:function(e){var r=e.owner,a=e.grid;if(!a)return[];for(var i=a.queries(\"2O,O\"),o=[],n=0;n<i.length;n+=2){var l=i[n];if(l&&l.role&&l.role.owner===r&&l.role.is(t.RelatiRemoteNormalSourceGridStatus,\"any\")){var u=i[n+1];!u.role&&o.push({target:l,routes:[u]})}}return o}},t.RelatiRemoteStableSourceGridStatus=[\"relati-remote-stable-launcher\",\"relati-remote-stable-repeater\"].concat(t.RelatiRemoteSourceGridStatus),t.RelatiRemoteStableBySource={allow:function(e){var r=e.owner,a=e.grid;if(!a)return!1;for(var i=a.queries(\"IIH,II,I,IH,H,IHH,HH,H,HI,I\"),o=0;o<i.length;o+=5){var n=i[o];if(n&&n.role&&n.role.owner===r&&n.role.is(t.RelatiRemoteStableSourceGridStatus,\"any\"))for(var l=i.slice(o+1,o+5),u=0;u<l.length-1;u++){var s=l[u],c=l[u+1];if(!s.role&&!c.role)return!0}}return!1},trace:function(e){var r=e.owner,a=e.grid;if(!a)return[];for(var i=a.queries(\"IIH,II,I,IH,H,IHH,HH,H,HI,I\"),o=[],n=0;n<i.length;n+=5){var l=i[n];if(l&&l.role&&l.role.owner===r&&l.role.is(t.RelatiRemoteStableSourceGridStatus,\"any\")){var u=i.slice(n+1,n+5),s=u[1],c=u[0];!s.role&&!c.role&&o.push({target:l,routes:[s,c]});s=u[1],c=u[2];!s.role&&!c.role&&o.push({target:l,routes:[s,c]});s=u[3],c=u[2];!s.role&&!c.role&&o.push({target:l,routes:[s,c]})}}return o}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.RelatiTargetGridStatus=[\"relati-receiver\"],t.RelatiToTarget={allow:function(e){return t.RelatiNormalToTarget.allow(e)||t.RelatiRemoteToTarget.allow(e)},trace:function(e){return t.RelatiNormalToTarget.trace(e).concat(t.RelatiRemoteToTarget.trace(e))}},t.RelatiNormalTargetGridStatus=[\"relati-normal-receiver\"].concat(t.RelatiTargetGridStatus),t.RelatiNormalToTarget={allow:function(e){var r=e.owner,a=e.grid;if(!a)return!1;for(var i=a.queries(\"O\"),o=0;o<i.length;o++){var n=i[o];if(n&&n.role&&n.role.owner===r&&n.role.is(t.RelatiNormalTargetGridStatus,\"any\"))return!0}return!1},trace:function(e){var r=e.owner,a=e.grid;if(!a)return[];for(var i=a.queries(\"O\"),o=[],n=0;n<i.length;n++){var l=i[n];l&&l.role&&l.role.owner===r&&l.role.is(t.RelatiNormalTargetGridStatus,\"any\")&&o.push({target:l,routes:[]})}return o}},t.RelatiRemoteTargetGridStatus=[\"relati-remote-receiver\"].concat(t.RelatiTargetGridStatus),t.RelatiRemoteToTarget={allow:function(e){return t.RelatiRemoteNormalToTarget.allow(e)||t.RelatiRemoteStableToTarget.allow(e)},trace:function(e){return t.RelatiRemoteNormalToTarget.trace(e).concat(t.RelatiRemoteStableToTarget.trace(e))}},t.RelatiRemoteNormalTargetGridStatus=[\"relati-remote-normal-receiver\"].concat(t.RelatiRemoteTargetGridStatus),t.RelatiRemoteNormalToTarget={allow:function(e){var r=e.owner,a=e.grid;if(!a)return!1;for(var i=a.queries(\"2O,O\"),o=0;o<i.length;o+=2){var n=i[o];if(n&&n.role&&n.role.owner===r&&n.role.is(t.RelatiRemoteNormalTargetGridStatus,\"any\"))if(!i[o+1].role)return!0}return!1},trace:function(e){var r=e.owner,a=e.grid;if(!a)return[];for(var i=a.queries(\"2O,O\"),o=[],n=0;n<i.length;n+=2){var l=i[n];if(l&&l.role&&l.role.owner===r&&l.role.is(t.RelatiRemoteNormalTargetGridStatus,\"any\")){var u=i[n+1];!u.role&&o.push({target:l,routes:[u]})}}return o}},t.RelatiRemoteStableTargetGridStatus=[\"relati-remote-stable-receiver\"].concat(t.RelatiRemoteTargetGridStatus),t.RelatiRemoteStableToTarget={allow:function(e){var r=e.owner,a=e.grid;if(!a)return!1;for(var i=a.queries(\"IIH,II,I,IH,H,IHH,HH,H,HI,I\"),o=0;o<i.length;o+=5){var n=i[o];if(n&&n.role&&n.role.owner===r&&n.role.is(t.RelatiRemoteStableTargetGridStatus,\"any\"))for(var l=i.slice(o+1,o+5),u=0;u<l.length-1;u++){var s=l[u],c=l[u+1];if(!s.role&&!c.role)return!0}}return!1},trace:function(e){var r=e.owner,a=e.grid;if(!a)return[];for(var i=a.queries(\"IIH,II,I,IH,H,IHH,HH,H,HI,I\"),o=[],n=0;n<i.length;n+=5){var l=i[n];if(l&&l.role&&l.role.owner===r&&l.role.is(t.RelatiRemoteStableTargetGridStatus,\"any\")){var u=i.slice(n+1,n+5),s=u[1],c=u[0];!s.role&&!c.role&&o.push({target:l,routes:[s,c]});s=u[1],c=u[2];!s.role&&!c.role&&o.push({target:l,routes:[s,c]});s=u[3],c=u[2];!s.role&&!c.role&&o.push({target:l,routes:[s,c]})}}return o}}},function(e,t,r){\"use strict\";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(1),n=r(4),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=\"leader\",t.effects=[n.RelatiMaintain],t}return i(t,e),t}(o.RelatiRole);t.RelatiLeader=l},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(2);t.RelatiMaintain={name:\"\",do:function(e){var t=e.game,r=e.grid;if(t&&r&&r.role&&!(t.turn<t.players.length)){for(var i=r.role.owner,o=0,n=t.board.gridList;o<n.length;o++){var l=n[o];l.role&&l.role.owner===i&&(l.role.status[\"relati-repeater\"]=!1)}!function e(t,r){if(!t.role||t.role.status[\"relati-repeater\"])return;t.role.status[\"relati-repeater\"]=!0;var i=a.RelatiToTarget.trace({owner:r,grid:t});for(var o=0,n=i;o<n.length;o++){var l=n[o],u=l.target;e(u,r)}}(r,i)}}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){this.game=e,this.badge=t}return e.prototype.selectGrid=function(e){this.game.getNowPlayer()==this&&this.game.selectGrid(e)},e}();t.RelatiPlayer=a},function(e,t,r){\"use strict\";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function e(){this._queryCache={},this._queriesCache={}}return e.prototype._cacheQueryResult=function(e,t){return this._queryCache[e]=t},e.prototype._cacheQueriesResult=function(e,t){return this._queriesCache[e]=t},e.prototype.clearQueryResult=function(e){return delete this._queryCache[e]},e.prototype.clearQueriesResult=function(e){return delete this._queriesCache[e]},e}();t.GridQueryCacheable=o;var n=function(e){function t(t,r,a){var i=e.call(this)||this;return i.board=t,i.x=r,i.y=a,i.coordinate=\"\"+String.fromCharCode(r+65)+(a+1),i}return i(t,e),t.prototype.query=function(e){if(this._queryCache[e])return this._queryCache[e];for(var t=this.x,r=this.y,a=this.board,i=1,o=1,n=0,l=e;n<l.length;n++){var u=l[n];switch(u){case\"F\":i=1,r-=o;break;case\"B\":i=1,r+=o;break;case\"R\":i=1,t+=o;break;case\"L\":i=1,t-=o;break;case\"-\":o*=-1;break;default:var s=parseInt(u);if(isNaN(s))break;o=1===i?s:10*o+s,i++}}return this._cacheQueryResult(e,a.grids[t]&&a.grids[t][r])},t.prototype.queries=function(e){if(this._queriesCache[e])return this._queriesCache[e];var r=t.simplifyDirectionList,a=t.originalDirectionLists,i=[];if(e.indexOf(\";\")>-1){for(var o=0,n=e.split(\";\");o<n.length;o++){var l=n[o];i=i.concat(this.queries(l))}return this._cacheQueriesResult(e,i)}for(var u=0;u<r.length;u++){var s=r[u];if(e.match(s)){for(var c=0,h=a[u];c<h.length;c++){var f=h[c];i=i.concat(this.queries(e.replace(s,f)))}return this._cacheQueriesResult(e,i)}}if(e.indexOf(\",\")>-1){for(var d=0,g=e.split(\",\");d<g.length;d++){l=g[d];i=i.concat(this.queries(l))}return this._cacheQueriesResult(e,i)}return this._cacheQueriesResult(e,[this.query(e)])},t.simplifyDirectionList=[/I/g,/H/g,/T/g,/X/g,/O/g],t.originalDirectionLists=[[\"F\",\"B\"],[\"R\",\"L\"],[\"F\",\"B\",\"R\",\"L\"],[\"FR\",\"FL\",\"BR\",\"BL\"],[\"F\",\"B\",\"R\",\"L\",\"FR\",\"FL\",\"BR\",\"BL\"]],t}(o);t.Grid=n;var l=function(e){function t(t,r){var a=e.call(this)||this;a.width=t,a.height=r,a.grids=[],a.gridList=[];for(var i=0;i<t;i++){for(var o=[],l=0;l<r;l++){var u=new n(a,i,l);o.push(u),a.gridList.push(u),a._queryCache[u.coordinate]=u}a.grids.push(o)}return a}return i(t,e),t.prototype.query=function(e){if(this._queryCache[e])return this._queryCache[e];var t=e,r=t[0].charCodeAt(0)-65,a=parseInt(t.substr(1,t.length-1))-1;return this._cacheQueryResult(e,this.grids[r]&&this.grids[r][a])},t.prototype.queries=function(e){if(this._queriesCache[e])return this._queriesCache[e];var t=[],r=this.width,a=this.height;if(\"*\"===e)return this.gridList;if(e.indexOf(\",\")>-1){for(var i=0,o=e.split(\",\");i<o.length;i++){var n=o[i];t=t.concat(this.queries(n))}return this._cacheQueriesResult(e,t)}if(e.indexOf(\":\")){for(var l=e.split(\":\"),u=l[0],s=l[1],c=this.query(u),h=this.query(s),f=Math.min(c.x,h.x),d=Math.max(c.x,h.x),g=Math.min(c.y,h.y),p=Math.max(c.y,h.y),R=f;R<=d;R++)for(var m=g;m<=p;m++){var v=this.grids[R]&&this.grids[R][m];t.push(v)}return this._cacheQueriesResult(e,t)}m=parseInt(e);if(!isNaN(m)){for(R=0;R<r;R++)t.push(this.grids[R][m]);return this._cacheQueriesResult(e,t)}if(1===e.length){for(R=e.charCodeAt(0)-65,m=0;m<a;m++)t.push(this.grids[R][m]);return this._cacheQueriesResult(e,t)}return this._cacheQueriesResult(e,[this.query(e)])},t}(o);t.GridBoard=l},function(e,t,r){\"use strict\";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),n=r(16),l=function(e){function t(t){var r=e.call(this,t)||this;r.game=t.game,r.gridSize=t.gridSize,r.container=t.container,r.state={background:[],gridList:r.game.board.gridList,gridLinePaths:[]};for(var a=r.game.board,i=r.gridSize,o=1;o<a.width;o++)r.state.gridLinePaths.push(\"M \"+o*i+\" 0 V \"+a.height*i);for(var n=1;n<a.height;n++)r.state.gridLinePaths.push(\"M 0 \"+n*i+\" H \"+a.width*i);return window.comp=r,r}return i(t,e),t.prototype._onClick=function(e){var t=e.nativeEvent,r=this.game.board,a=Math.floor(t.offsetX/5),i=Math.floor(t.offsetY/5),o=r.grids[a]&&r.grids[a][i];this.game.selectGrid(o),this.setState({gridList:r.gridList})},t.prototype.render=function(){var e=this.container,t=this.game.board,r=\"scale(\"+.95*Math.min(e.clientWidth/(5*t.width),e.clientHeight/(5*t.height))+\")\";return o.createElement(\"svg\",{width:\"45\",height:\"45\",onClick:this._onClick.bind(this),style:{transform:\"scale(\"+r+\")\"}},o.createElement(\"g\",null,this.state.background),o.createElement(\"g\",null,this.state.gridLinePaths.map(function(e){return o.createElement(\"path\",{d:e,stroke:\"#888\",strokeWidth:\"0.4\"})})),o.createElement(\"g\",null,this.state.gridList.map(function(e){return o.createElement(n.RelatiBadgeView,{grid:e})})))},t}(o.Component);t.RelatiBoardView=l},function(e,t,r){\"use strict\";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props.grid,t=[],r=5*e.x+1,a=5*e.y+1,i=5*e.x+4,n=5*e.y+4,l={d:\"\",strokeWidth:\"0.6\",stroke:\"\",fill:\"none\"};if(!e.role)return o.createElement(\"g\",{id:e.coordinate},t);switch(e.role.owner.badge){case\"O\":l.d=\"\\n                    M \"+(r+1.5)+\" \"+(a+1.5)+\"\\n                    m 0 -1.5\\n                    a 1.5 1.5 0 0 1, 0 3\\n                    a 1.5 1.5 0 0 1, 0 -3\\n                \",l.stroke=\"crimson\";break;case\"X\":l.d=\"\\n                    M \"+r+\" \"+a+\" L \"+i+\" \"+n+\"\\n                    M \"+i+\" \"+a+\" L \"+r+\" \"+n+\"\\n                \",l.stroke=\"royalblue\"}return e.role.is(\"relati-launcher\")?(l.strokeWidth=\"1\",t.push(o.createElement(\"path\",l)),l.stroke=\"#f2f2f2\",l.strokeWidth=\"0.5\",t.push(o.createElement(\"path\",l))):e.role.is(\"relati-repeater\")?t.push(o.createElement(\"path\",l)):(l.stroke=\"#666\",t.push(o.createElement(\"path\",l))),o.createElement(\"g\",{id:e.coordinate},t)},t}(o.Component);t.RelatiBadgeView=n}]);","extractedComments":[]}